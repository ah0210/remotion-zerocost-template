(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{3065:(e,t,o)=>{"use strict";o.d(t,{BL:()=>d,Np:()=>i,SU:()=>s,Yd:()=>l,cB:()=>c,cS:()=>u});var r=o(5594);let l="MyComp",a=r.z.enum(["none","zoom-in","zoom-out"]),n=r.z.enum(["none","fade"]);r.z.object({title:r.z.string().optional(),subtitle:r.z.string().optional(),badgeText:r.z.string().optional(),coverImageDataUrl:r.z.string().optional(),coverVideoDataUrl:r.z.string().optional(),logoImageDataUrl:r.z.string().optional(),imageArray:r.z.array(r.z.string()).optional(),imageSequence:r.z.array(r.z.object({src:r.z.string(),durationInFrames:r.z.number().optional(),effect:a.optional()})).optional(),coverImageSequence:r.z.array(r.z.object({src:r.z.string(),durationInFrames:r.z.number().optional()})).optional(),coverVideoSequence:r.z.array(r.z.object({src:r.z.string(),durationInFrames:r.z.number().optional()})).optional(),audioSequence:r.z.array(r.z.object({src:r.z.string(),durationInFrames:r.z.number().optional()})).optional(),imageEffect:a.optional(),transitionEffect:n.optional(),imageDurationInFrames:r.z.number().optional(),subtitles:r.z.array(r.z.string()).optional(),backgroundColor:r.z.string().optional(),textColor:r.z.string().optional(),accentColor:r.z.string().optional(),titleFontSize:r.z.number().optional(),subtitleFontSize:r.z.number().optional(),titleDisplayFrames:r.z.number().optional(),captionsFontSize:r.z.number().optional(),captionsFontFamily:r.z.string().optional(),durationInFrames:r.z.number().optional(),coverMediaType:r.z.enum(["image","video","mixed"]).optional(),audioDataUrl:r.z.string().optional(),mediaFit:r.z.enum(["cover","contain"]).optional(),mediaPosition:r.z.enum(["center","top","bottom","left","right"]).optional(),layout:r.z.enum(["center","left","image-top","full-screen"]).optional(),showRings:r.z.boolean().optional()});let i={title:"我的 Remotion 视频",subtitle:"用你自己的素材快速生成视频",badgeText:"新作品",imageArray:[],imageSequence:[],imageEffect:"none",transitionEffect:"fade",imageDurationInFrames:30,subtitles:[],backgroundColor:"#ffffff",textColor:"#111827",accentColor:"#2563eb",titleFontSize:70,subtitleFontSize:24,titleDisplayFrames:90,captionsFontSize:28,captionsFontFamily:"inter",durationInFrames:200,coverMediaType:"image",mediaFit:"cover",mediaPosition:"center",layout:"center",showRings:!0},s=200,d=1280,u=720,c=30},6193:(e,t,o)=>{Promise.resolve().then(o.bind(o,8156))},8156:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>v});var r=o(5155),l=o(2115),a=o(6874),n=o.n(a),i=o(6766),s=o(5695),d=o(3065);let u="remotion-works",c="assets",m=()=>{let e=window.localStorage.getItem(u);if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}},x=e=>{try{window.localStorage.setItem(u,JSON.stringify(e))}catch(e){throw Error("写入存储失败")}},f=()=>new Promise((e,t)=>{if("undefined"==typeof indexedDB){t(Error("IndexedDB 不可用"));return}let o=indexedDB.open("remotion-media",1);o.onupgradeneeded=()=>{let e=o.result;e.objectStoreNames.contains(c)||e.createObjectStore(c)},o.onsuccess=()=>e(o.result),o.onerror=()=>{var e;return t(null!==(e=o.error)&&void 0!==e?e:Error("打开存储失败"))}}),g=async e=>{let t=await f(),o="media_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,8));return await new Promise((r,l)=>{let a=t.transaction(c,"readwrite"),n=a.objectStore(c).put(e,o);n.onsuccess=()=>r(),n.onerror=()=>{var e;return l(null!==(e=n.error)&&void 0!==e?e:Error("保存素材失败"))},a.onabort=()=>{var e;return l(null!==(e=a.error)&&void 0!==e?e:Error("保存素材失败"))}}),t.close(),o},p=async e=>{let t=await f(),o=await new Promise((o,r)=>{let l=t.transaction(c,"readonly").objectStore(c).get(e);l.onsuccess=()=>o(l.result),l.onerror=()=>{var e;return r(null!==(e=l.error)&&void 0!==e?e:Error("读取素材失败"))}});return t.close(),o},b=()=>{var e,t,o;let a=(0,s.useRouter)(),u=(0,s.useSearchParams)(),c=u.get("workId"),f=u.get("templateId"),[b,v]=(0,l.useState)(""),[h,j]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[I,w]=(0,l.useState)("center"),[S,k]=(0,l.useState)("#ffffff"),[F,z]=(0,l.useState)("#111827"),[C,U]=(0,l.useState)("#2563eb"),[T,M]=(0,l.useState)(void 0),[R,E]=(0,l.useState)(void 0),[D,L]=(0,l.useState)(void 0),[P,q]=(0,l.useState)(void 0),[O,V]=(0,l.useState)(void 0),[B,A]=(0,l.useState)(void 0),[_,J]=(0,l.useState)(void 0),[Y,G]=(0,l.useState)([]),[H,K]=(0,l.useState)([]),[Q,W]=(0,l.useState)([]),[X,Z]=(0,l.useState)([]),[$,ee]=(0,l.useState)(""),[et,eo]=(0,l.useState)(""),[er,el]=(0,l.useState)(""),[ea,en]=(0,l.useState)(void 0),[ei,es]=(0,l.useState)(""),[ed,eu]=(0,l.useState)(""),[ec,em]=(0,l.useState)(void 0),[ex,ef]=(0,l.useState)([]),[eg,ep]=(0,l.useState)([]),[eb,ev]=(0,l.useState)([]),[eh,ej]=(0,l.useState)([]),[ey,eN]=(0,l.useState)(""),[eI,ew]=(0,l.useState)("70"),[eS,ek]=(0,l.useState)("24"),[eF,ez]=(0,l.useState)("90"),[eC,eU]=(0,l.useState)("28"),[eT,eM]=(0,l.useState)("inter"),[eR,eE]=(0,l.useState)(String(d.SU)),[eD,eL]=(0,l.useState)("image"),[eP,eq]=(0,l.useState)("cover"),[eO,eV]=(0,l.useState)("center"),[eB,eA]=(0,l.useState)(!0),[e_,eJ]=(0,l.useState)("none"),[eY,eG]=(0,l.useState)("fade"),[eH,eK]=(0,l.useState)(!0),[eQ,eW]=(0,l.useState)(""),[eX,eZ]=(0,l.useState)(""),[e$,e0]=(0,l.useState)(null),[e1,e2]=(0,l.useState)(!1),e7=(0,l.useMemo)(()=>X.filter(e=>"upload"===e.type&&e.mediaId).map(e=>e.mediaId),[X]),e3=(0,l.useMemo)(()=>Y.filter(e=>"upload"===e.type&&e.mediaId).map(e=>e.mediaId),[Y]),e5=(0,l.useMemo)(()=>H.filter(e=>"upload"===e.type&&e.mediaId).map(e=>e.mediaId),[H]),e6=(0,l.useMemo)(()=>Q.filter(e=>"upload"===e.type&&e.mediaId).map(e=>e.mediaId),[Q]),e8=(0,l.useMemo)(()=>[{id:"template-product",name:"产品发布",description:"强调标签 + 左侧图文",data:{title:"新品发布会",subtitle:"为你的产品故事注入亮点",badgeText:"热销推荐",layout:"left",backgroundColor:"#0f172a",textColor:"#f8fafc",accentColor:"#22d3ee",titleFontSize:64,subtitleFontSize:26,durationInFrames:240,coverMediaType:"image",mediaFit:"cover",mediaPosition:"center",showRings:!0}},{id:"template-brand",name:"品牌展示",description:"居中排版 + 简洁背景",data:{title:"品牌形象片",subtitle:"让你的品牌更有温度",badgeText:"故事感",layout:"center",backgroundColor:"#ffffff",textColor:"#111827",accentColor:"#2563eb",titleFontSize:72,subtitleFontSize:24,durationInFrames:200,coverMediaType:"image",mediaFit:"contain",mediaPosition:"center",showRings:!0}},{id:"template-video",name:"视频节奏",description:"顶部视频 + 强节奏",data:{title:"节奏感视频",subtitle:"适合活动回顾或短片",badgeText:"氛围感",layout:"image-top",backgroundColor:"#111827",textColor:"#f8fafc",accentColor:"#f97316",titleFontSize:60,subtitleFontSize:24,durationInFrames:180,coverMediaType:"video",mediaFit:"cover",mediaPosition:"center",showRings:!1}},{id:"template-wechat-video",name:"视频号短片",description:"高对比 + 适合短视频",data:{title:"视频号新品发布",subtitle:"15 秒抓住观众注意力",badgeText:"视频号推荐",layout:"image-top",backgroundColor:"#0f172a",textColor:"#f8fafc",accentColor:"#38bdf8",titleFontSize:64,subtitleFontSize:22,durationInFrames:150,coverMediaType:"image",mediaFit:"cover",mediaPosition:"center",showRings:!1}}],[]),e4=(0,l.useMemo)(()=>{if(f)return e8.find(e=>e.id===f)},[f,e8]),e9=e=>{v(e.data.title),j(e.data.subtitle),N(e.data.badgeText),w(e.data.layout),k(e.data.backgroundColor),z(e.data.textColor),U(e.data.accentColor),ew(String(e.data.titleFontSize)),ek(String(e.data.subtitleFontSize)),ez("90"),eU("28"),eM("inter"),eE(String(e.data.durationInFrames)),eL(e.data.coverMediaType),eq(e.data.mediaFit),eV(e.data.mediaPosition),eA(e.data.showRings),M(void 0),E(void 0),q(void 0),V(void 0),A(void 0),J(void 0),G([]),K([]),W([]),ee(""),eo(""),L(void 0),el(""),en(void 0),es(""),em(void 0),ef([]),ep([]),ev([]),Z([]),ej([]),eu(""),eN(""),eJ("none"),eG("fade"),eZ("已套用模板，可继续调整。"),eW("")};(0,l.useEffect)(()=>{var e,t,o,r,l,a,n,i,s,u,x,f,g,p,b,h,y,I,S,F,C,T,R,D,P,O,B,_,Y,H,Q,X;if(!c){e0(null);return}let $=m().find(e=>e.id===c);if(!$){eW("未找到对应的作品。"),e0(null);return}e0($.id),v(null!==(r=$.title)&&void 0!==r?r:""),j(null!==(l=$.subtitle)&&void 0!==l?l:""),N(null!==(a=$.badgeText)&&void 0!==a?a:""),w(null!==(n=$.layout)&&void 0!==n?n:"center"),k(null!==(i=$.backgroundColor)&&void 0!==i?i:"#ffffff"),z(null!==(s=$.textColor)&&void 0!==s?s:"#111827"),U(null!==(u=$.accentColor)&&void 0!==u?u:"#2563eb"),M($.coverImageDataUrl),E($.coverVideoDataUrl),L($.logoImageDataUrl),q($.coverImageMediaId),V($.coverVideoMediaId),A($.logoImageMediaId),J($.audioMediaId);let et=[...$.coverImageMediaId?[{type:"upload",mediaId:$.coverImageMediaId}]:[],...$.coverImageUrl?[{type:"url",url:$.coverImageUrl}]:[],...$.coverImageDataUrl?[{type:"url",url:$.coverImageDataUrl}]:[]],er=[...$.coverVideoMediaId?[{type:"upload",mediaId:$.coverVideoMediaId}]:[],...$.coverVideoUrl?[{type:"url",url:$.coverVideoUrl}]:[],...$.coverVideoDataUrl?[{type:"url",url:$.coverVideoDataUrl}]:[]],ea=[...$.audioMediaId?[{type:"upload",mediaId:$.audioMediaId}]:[],...$.audioUrl?[{type:"url",url:$.audioUrl}]:[],...$.audioDataUrl?[{type:"url",url:$.audioDataUrl}]:[]],ei=$.coverImageSequenceItems&&$.coverImageSequenceItems.length>0?$.coverImageSequenceItems:et,ed=$.coverVideoSequenceItems&&$.coverVideoSequenceItems.length>0?$.coverVideoSequenceItems:er,ec=$.audioSequenceItems&&$.audioSequenceItems.length>0?$.audioSequenceItems:ea;G(ei),K(ed),W(ec);let em=[...(null!==(x=$.imageMediaIds)&&void 0!==x?x:[]).map(e=>({type:"upload",mediaId:e})),...(null!==(f=$.imageUrls)&&void 0!==f?f:[]).map(e=>({type:"url",url:e}))],ex=$.imageSequenceItems&&$.imageSequenceItems.length>0?$.imageSequenceItems:em;Z(ex),ee(null!==(p=null!==(g=null===(e=ei.find(e=>"url"===e.type))||void 0===e?void 0:e.url)&&void 0!==g?g:$.coverImageUrl)&&void 0!==p?p:""),eo(null!==(h=null!==(b=null===(t=ed.find(e=>"url"===e.type))||void 0===t?void 0:t.url)&&void 0!==b?b:$.coverVideoUrl)&&void 0!==h?h:""),el(null!==(y=$.logoImageUrl)&&void 0!==y?y:""),en($.audioDataUrl),es(null!==(S=null!==(I=null===(o=ec.find(e=>"url"===e.type))||void 0===o?void 0:o.url)&&void 0!==I?I:$.audioUrl)&&void 0!==S?S:""),eu(ex.filter(e=>"url"===e.type).map(e=>{var t;return null!==(t=e.url)&&void 0!==t?t:""}).filter(Boolean).join("\n")),eN((null!==(F=$.subtitles)&&void 0!==F?F:[]).join("\n")),ew(String(null!==(C=$.titleFontSize)&&void 0!==C?C:70)),ek(String(null!==(T=$.subtitleFontSize)&&void 0!==T?T:24)),ez(String(null!==(R=$.titleDisplayFrames)&&void 0!==R?R:90)),eU(String(null!==(D=$.captionsFontSize)&&void 0!==D?D:28)),eM(null!==(P=$.captionsFontFamily)&&void 0!==P?P:"inter"),eE(String(null!==(O=$.durationInFrames)&&void 0!==O?O:d.SU)),eL(null!==(B=$.coverMediaType)&&void 0!==B?B:"image"),eq(null!==(_=$.mediaFit)&&void 0!==_?_:"cover"),eV(null!==(Y=$.mediaPosition)&&void 0!==Y?Y:"center"),eA(null===(H=$.showRings)||void 0===H||H),eJ(null!==(Q=$.imageEffect)&&void 0!==Q?Q:"none"),eG(null!==(X=$.transitionEffect)&&void 0!==X?X:"fade"),eK($.addToRenderPage)},[c]),(0,l.useEffect)(()=>{e2(!1)},[f,c]),(0,l.useEffect)(()=>{!c&&f&&e4&&!e1&&(e9(e4),e2(!0))},[e9,e1,e4,f,c]),(0,l.useEffect)(()=>{let e=!0,t=[];return(async()=>{if(0===e3.length){ef([]);return}try{let o=[];for(let r of e3){let l=await p(r);if(!e)return;if(!l)continue;let a=URL.createObjectURL(l);t.push(a),o.push(a)}e&&ef(o)}catch(t){e&&ef([])}})(),()=>{e=!1,t.forEach(e=>URL.revokeObjectURL(e))}},[e3]),(0,l.useEffect)(()=>{let e=!0,t=[];return(async()=>{if(0===e5.length){ep([]);return}try{let o=[];for(let r of e5){let l=await p(r);if(!e)return;if(!l)continue;let a=URL.createObjectURL(l);t.push(a),o.push(a)}e&&ep(o)}catch(t){e&&ep([])}})(),()=>{e=!1,t.forEach(e=>URL.revokeObjectURL(e))}},[e5]),(0,l.useEffect)(()=>{let e,t=!0;return(async()=>{if(!B){em(void 0);return}try{let o=await p(B);if(!t)return;if(!o){em(void 0);return}e=URL.createObjectURL(o),em(t=>(t&&URL.revokeObjectURL(t),e))}catch(e){t&&em(void 0)}})(),()=>{t=!1,e&&URL.revokeObjectURL(e)}},[B]),(0,l.useEffect)(()=>{let e=!0,t=[];return(async()=>{if(0===e6.length){ev([]);return}try{let o=[];for(let r of e6){let l=await p(r);if(!e)return;if(!l)continue;let a=URL.createObjectURL(l);t.push(a),o.push(a)}e&&ev(o)}catch(t){e&&ev([])}})(),()=>{e=!1,t.forEach(e=>URL.revokeObjectURL(e))}},[e6]),(0,l.useEffect)(()=>{let e=!0,t=[];return(async()=>{if(0===e7.length){ej([]);return}try{let o=[];for(let r of e7){let l=await p(r);if(!e)return;if(!l)continue;let a=URL.createObjectURL(l);t.push(a),o.push(a)}e&&ej(o)}catch(t){e&&ej([])}})(),()=>{e=!1,t.forEach(e=>URL.revokeObjectURL(e))}},[e7]);let te=(0,l.useMemo)(()=>({backgroundColor:S}),[S]),tt=Number(eI)||70,to=Number(eS)||24,tr=Number(eF)||0,tl=Number(eC)||28,ta=eT.trim()||"inter",tn=Number(eR)||d.SU,ti=b.trim(),ts=h.trim(),td=ti.length>0,tu=ts.length>0,tc=(0,l.useMemo)(()=>{let e=new Map;return e3.forEach((t,o)=>{let r=ex[o];r&&e.set(t,r)}),e},[e3,ex]),tm=(0,l.useMemo)(()=>{let e=new Map;return e5.forEach((t,o)=>{let r=eg[o];r&&e.set(t,r)}),e},[e5,eg]),tx=(0,l.useMemo)(()=>{let e=new Map;return e6.forEach((t,o)=>{let r=eb[o];r&&e.set(t,r)}),e},[e6,eb]),tf=(0,l.useMemo)(()=>Y.map(e=>{var t,o;return"upload"===e.type?e.mediaId?tc.get(e.mediaId):null:null!==(o=null===(t=e.url)||void 0===t?void 0:t.trim())&&void 0!==o?o:null}).filter(Boolean),[tc,Y]),tg=(0,l.useMemo)(()=>H.map(e=>{var t,o;return"upload"===e.type?e.mediaId?tm.get(e.mediaId):null:null!==(o=null===(t=e.url)||void 0===t?void 0:t.trim())&&void 0!==o?o:null}).filter(Boolean),[tm,H]),tp=(0,l.useMemo)(()=>Q.map(e=>{var t,o;return"upload"===e.type?e.mediaId?tx.get(e.mediaId):null:null!==(o=null===(t=e.url)||void 0===t?void 0:t.trim())&&void 0!==o?o:null}).filter(Boolean),[tx,Q]),tb=null!==(e=tf[0])&&void 0!==e?e:$.trim()?$.trim():T,tv=null!==(t=tg[0])&&void 0!==t?t:et.trim()?et.trim():R,th=er.trim().length>0?er.trim():null!=ec?ec:D,tj=null!==(o=tp[0])&&void 0!==o?o:ei.trim()?ei.trim():ea,ty=(0,l.useMemo)(()=>{let e=new Map;return e7.forEach((t,o)=>{let r=eh[o];r&&e.set(t,r)}),e},[e7,eh]),tN=(0,l.useMemo)(()=>X.map(e=>{var t;return"upload"===e.type?e.mediaId?ty.get(e.mediaId):void 0:null===(t=e.url)||void 0===t?void 0:t.trim()}).filter(Boolean),[ty,X]),tI="mixed"===eD&&tv?tN.length>0||tb?"mixed":"video":tN.length>0?"multi-image":"video"===eD&&tv?"video":tb?"image":"empty",tw=async e=>{var t;let o=Array.from(null!==(t=e.currentTarget.files)&&void 0!==t?t:[]);if(0!==o.length){"mixed"!==eD&&eL("image"),ee(""),M(void 0);try{let e=[];for(let t of o){let o=await g(t);e.push(o)}let t=e.map(e=>({type:"upload",mediaId:e,durationInFrames:60}));G(e=>[...e,...t])}catch(e){eW("封面素材保存失败，请改用链接或更小的文件。"),G(e=>e.filter(e=>"upload"!==e.type)),ef([])}}},tS=async e=>{var t;let o=Array.from(null!==(t=e.currentTarget.files)&&void 0!==t?t:[]);if(0!==o.length){"mixed"!==eD&&eL("video"),eo(""),E(void 0);try{let e=[];for(let t of o){let o=await g(t);e.push(o)}let t=e.map(e=>({type:"upload",mediaId:e,durationInFrames:60}));K(e=>[...e,...t])}catch(e){eW("视频素材保存失败，请改用链接或更小的文件。"),K(e=>e.filter(e=>"upload"!==e.type)),ep([])}}},tk=async e=>{var t;let o=Array.from(null!==(t=e.currentTarget.files)&&void 0!==t?t:[]);if(0!==o.length){es(""),en(void 0);try{let e=[];for(let t of o){let o=await g(t);e.push(o)}let t=e.map(e=>({type:"upload",mediaId:e,durationInFrames:60}));W(e=>[...e,...t])}catch(e){eW("音频素材保存失败，请改用链接或更小的文件。"),W(e=>e.filter(e=>"upload"!==e.type)),ev([])}}},tF=async e=>{var t;let o=null===(t=e.currentTarget.files)||void 0===t?void 0:t[0];if(!o){L(void 0),A(void 0),em(void 0);return}el(""),L(void 0);try{let e=await g(o),t=URL.createObjectURL(o);A(e),em(e=>(e&&URL.revokeObjectURL(e),t))}catch(e){eW("徽标素材保存失败，请改用链接或更小的文件。"),A(void 0),em(void 0)}},tz=async e=>{var t;let o=Array.from(null!==(t=e.currentTarget.files)&&void 0!==t?t:[]);if(0!==o.length)try{let e=[];for(let t of o){let o=await g(t);e.push(o)}let t=e.map(e=>({type:"upload",mediaId:e,durationInFrames:30}));Z(e=>[...e,...t])}catch(e){eW("多图素材保存失败，请改用链接或更小的文件。"),Z(e=>e.filter(e=>"upload"!==e.type)),ej([])}},tC=e=>{eu(e.filter(e=>"url"===e.type).map(e=>{var t;return null!==(t=e.url)&&void 0!==t?t:""}).filter(Boolean).join("\n"))},tU=e=>{eu(e);let t=e.split(/\r?\n|,/).map(e=>e.trim()).filter(Boolean);Z(e=>{let o=[],r=0;for(let l of e)"url"===l.type?r<t.length&&(o.push({...l,url:t[r]}),r+=1):o.push(l);for(;r<t.length;r+=1)o.push({type:"url",url:t[r]});return o})},tT=(e,t)=>{Z(o=>{if(t<0||t>=o.length)return o;let r=[...o],[l]=r.splice(e,1);return r.splice(t,0,l),tC(r),r})},tM=e=>{Z(t=>{let o=t.filter((t,o)=>o!==e);return tC(o),o})},tR=e=>{G(t=>{let o=t[e],r=t.filter((t,o)=>o!==e);return(null==o?void 0:o.type)==="url"&&ee(""),r})},tE=(e,t)=>{G(o=>{let r=o[e],l=o.map((o,r)=>r===e?{...o,...t}:o);return(null==r?void 0:r.type)==="url"&&"string"==typeof t.url&&ee(t.url),l})},tD=e=>{K(t=>{let o=t[e],r=t.filter((t,o)=>o!==e);return(null==o?void 0:o.type)==="url"&&eo(""),r})},tL=(e,t)=>{K(o=>{let r=o[e],l=o.map((o,r)=>r===e?{...o,...t}:o);return(null==r?void 0:r.type)==="url"&&"string"==typeof t.url&&eo(t.url),l})},tP=e=>{W(t=>{let o=t[e],r=t.filter((t,o)=>o!==e);return(null==o?void 0:o.type)==="url"&&es(""),r})},tq=(e,t)=>{W(o=>{let r=o[e],l=o.map((o,r)=>r===e?{...o,...t}:o);return(null==r?void 0:r.type)==="url"&&"string"==typeof t.url&&es(t.url),l})},tO=(e,t)=>{Z(o=>{let r=o.map((o,r)=>r===e?{...o,...t}:o);return tC(r),r})};return(0,r.jsxs)("div",{className:"max-w-screen-md m-auto mb-12 mt-16 font-geist px-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-8 gap-4 flex-wrap",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-subtitle",children:"步骤 2/2"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:e$?"编辑 Remotion 作品":"设置作品素材"}),(0,r.jsx)("p",{className:"text-sm text-subtitle mt-2",children:"完善素材与样式后即可保存你的作品。"}),e4?(0,r.jsxs)("div",{className:"text-xs text-subtitle mt-1",children:["已选择模板：",e4.name]}):null]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e$?null:(0,r.jsx)(n(),{href:"/works/new/template-selection",className:"text-sm font-medium text-foreground border border-unfocused-border-color rounded-geist px-3 py-2 hover:border-focused-border-color",children:"返回模板选择"}),(0,r.jsx)(n(),{href:"/",className:"text-sm font-medium text-foreground border border-unfocused-border-color rounded-geist px-3 py-2 hover:border-focused-border-color",children:"返回渲染页面"})]})]}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),eW(""),eZ(""),tt<=0){eW("标题字号必须大于 0。");return}if(to<=0){eW("副标题字号必须大于 0。");return}if(tr<0){eW("标题展示帧数不能为负数。");return}if(tl<=0){eW("字幕字号必须大于 0。");return}if(tn<=0){eW("视频时长必须大于 0。");return}if(Y.some(e=>void 0!==e.durationInFrames&&e.durationInFrames<=0)){eW("封面素材帧数必须大于 0。");return}if(H.some(e=>void 0!==e.durationInFrames&&e.durationInFrames<=0)){eW("视频素材帧数必须大于 0。");return}if(Q.some(e=>void 0!==e.durationInFrames&&e.durationInFrames<=0)){eW("音频素材帧数必须大于 0。");return}let t=ey.split(/\r?\n/).map(e=>e.trim()).filter(Boolean),o=X.map(e=>{if("url"===e.type){var t;let o=null===(t=e.url)||void 0===t?void 0:t.trim();return o?{...e,url:o}:null}return e.mediaId?e:null}).filter(Boolean),r=Y.map(e=>{if("url"===e.type){var t;let o=null===(t=e.url)||void 0===t?void 0:t.trim();return o?{...e,url:o}:null}return e.mediaId?e:null}).filter(Boolean),l=H.map(e=>{if("url"===e.type){var t;let o=null===(t=e.url)||void 0===t?void 0:t.trim();return o?{...e,url:o}:null}return e.mediaId?e:null}).filter(Boolean),n=Q.map(e=>{if("url"===e.type){var t;let o=null===(t=e.url)||void 0===t?void 0:t.trim();return o?{...e,url:o}:null}return e.mediaId?e:null}).filter(Boolean),i=o.filter(e=>"upload"===e.type).map(e=>e.mediaId),s=o.filter(e=>"url"===e.type).map(e=>e.url),d=m();if(e$){let e=d.map(e=>e.id===e$?{...e,title:ti.length>0?ti:void 0,subtitle:ts.length>0?ts:void 0,badgeText:y.trim()?y.trim():void 0,coverImageDataUrl:T,coverVideoDataUrl:R,logoImageDataUrl:D,coverImageMediaId:P,coverVideoMediaId:O,logoImageMediaId:B,audioMediaId:_,coverImageSequenceItems:r.length>0?r:void 0,coverVideoSequenceItems:l.length>0?l:void 0,audioSequenceItems:n.length>0?n:void 0,imageMediaIds:i.length>0?i:void 0,imageSequenceItems:o.length>0?o:void 0,imageEffect:e_,transitionEffect:eY,coverImageUrl:$.trim()||void 0,coverVideoUrl:et.trim()||void 0,logoImageUrl:er.trim()||void 0,audioDataUrl:ea,audioUrl:ei.trim()||void 0,imageUrls:s.length>0?s:void 0,subtitles:t.length>0?t:void 0,backgroundColor:S,textColor:F,accentColor:C,titleFontSize:tt,subtitleFontSize:to,titleDisplayFrames:tr,captionsFontSize:tl,captionsFontFamily:ta,durationInFrames:tn,coverMediaType:eD,mediaFit:eP,mediaPosition:eO,layout:I,showRings:eB,addToRenderPage:eH}:e);try{x(e)}catch(e){eW("保存失败：本地存储空间不足，请删除旧作品或改用链接。");return}if(eH){a.push("/?workId=".concat(e$));return}eZ("作品已更新，未加入渲染页面。");return}let u={id:"work_".concat(Date.now()),title:ti.length>0?ti:void 0,subtitle:ts.length>0?ts:void 0,badgeText:y.trim()?y.trim():void 0,coverImageDataUrl:T,coverVideoDataUrl:R,logoImageDataUrl:D,coverImageMediaId:P,coverVideoMediaId:O,logoImageMediaId:B,audioMediaId:_,coverImageSequenceItems:r.length>0?r:void 0,coverVideoSequenceItems:l.length>0?l:void 0,audioSequenceItems:n.length>0?n:void 0,imageMediaIds:i.length>0?i:void 0,imageSequenceItems:o.length>0?o:void 0,imageEffect:e_,transitionEffect:eY,coverImageUrl:$.trim()||void 0,coverVideoUrl:et.trim()||void 0,logoImageUrl:er.trim()||void 0,audioDataUrl:ea,audioUrl:ei.trim()||void 0,imageUrls:s.length>0?s:void 0,subtitles:t.length>0?t:void 0,backgroundColor:S,textColor:F,accentColor:C,titleFontSize:tt,subtitleFontSize:to,titleDisplayFrames:tr,captionsFontSize:tl,captionsFontFamily:ta,durationInFrames:tn,coverMediaType:eD,mediaFit:eP,mediaPosition:eO,layout:I,showRings:eB,addToRenderPage:eH,createdAt:Date.now()};try{x([u,...d])}catch(e){eW("保存失败：本地存储空间不足，请删除旧作品或改用链接。");return}if(eH){a.push("/?workId=".concat(u.id));return}eZ("作品已保存，未加入渲染页面。")},className:"border border-unfocused-border-color rounded-geist bg-background p-geist flex flex-col gap-4",children:[(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["作品标题",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:b,onChange:e=>v(e.currentTarget.value),placeholder:"例如：我的第一支视频"})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["副标题",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:h,onChange:e=>j(e.currentTarget.value),placeholder:"可选，用于补充说明"})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["强调标签",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:y,onChange:e=>N(e.currentTarget.value),placeholder:"可选，例如：新品发布"})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["布局风格",(0,r.jsxs)("select",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:I,onChange:e=>w(e.currentTarget.value),children:[(0,r.jsx)("option",{value:"center",children:"居中标题布局"}),(0,r.jsx)("option",{value:"left",children:"左侧图文布局"}),(0,r.jsx)("option",{value:"image-top",children:"图片在上布局"}),(0,r.jsx)("option",{value:"full-screen",children:"铺满屏幕布局"})]})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["素材类型",(0,r.jsxs)("select",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:eD,onChange:e=>eL(e.currentTarget.value),children:[(0,r.jsx)("option",{value:"image",children:"图片"}),(0,r.jsx)("option",{value:"video",children:"视频"}),(0,r.jsx)("option",{value:"mixed",children:"图片 + 视频"})]})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["素材裁切",(0,r.jsxs)("select",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:eP,onChange:e=>eq(e.currentTarget.value),children:[(0,r.jsx)("option",{value:"cover",children:"裁切填充"}),(0,r.jsx)("option",{value:"contain",children:"完整展示"})]})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["素材对齐",(0,r.jsxs)("select",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:eO,onChange:e=>eV(e.currentTarget.value),children:[(0,r.jsx)("option",{value:"center",children:"居中"}),(0,r.jsx)("option",{value:"top",children:"顶部"}),(0,r.jsx)("option",{value:"bottom",children:"底部"}),(0,r.jsx)("option",{value:"left",children:"左侧"}),(0,r.jsx)("option",{value:"right",children:"右侧"})]})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["背景颜色",(0,r.jsx)("input",{className:"h-10 w-32 rounded-geist border border-unfocused-border-color p-1",type:"color",value:S,onChange:e=>k(e.currentTarget.value)})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["文本颜色",(0,r.jsx)("input",{className:"h-10 w-32 rounded-geist border border-unfocused-border-color p-1",type:"color",value:F,onChange:e=>z(e.currentTarget.value)})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["强调色",(0,r.jsx)("input",{className:"h-10 w-32 rounded-geist border border-unfocused-border-color p-1",type:"color",value:C,onChange:e=>U(e.currentTarget.value)})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["标题字号",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:24,max:120,value:eI,onChange:e=>ew(e.currentTarget.value),placeholder:"例如：70"})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["副标题字号",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:16,max:80,value:eS,onChange:e=>ek(e.currentTarget.value),placeholder:"例如：24"})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["标题/副标题展示帧数",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:0,max:600,value:eF,onChange:e=>ez(e.currentTarget.value),placeholder:"例如：90"})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["视频时长（帧）",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:30,max:2e3,value:eR,onChange:e=>eE(e.currentTarget.value),placeholder:"例如：".concat(d.SU)})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["封面素材链接",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:$,onChange:e=>{let t=e.currentTarget.value;ee(t),"mixed"!==eD&&eL("image"),M(void 0),q(void 0),G(e=>{let o=e.filter(e=>"upload"===e.type),r=t.trim();return r?[...o,{type:"url",url:r}]:o})},placeholder:"https://..."})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["上传封面素材",(0,r.jsx)("input",{className:"text-sm",type:"file",accept:"image/*",onChange:tw})]}),Y.length>0?(0,r.jsxs)("div",{className:"flex flex-col gap-3 text-sm text-foreground",children:[(0,r.jsx)("div",{className:"font-medium text-foreground",children:"封面素材列表"}),(0,r.jsx)("div",{className:"flex flex-col gap-3",children:Y.map((e,t)=>{var o,l,a;let n="upload"===e.type?e.mediaId?tc.get(e.mediaId):void 0:e.url;return(0,r.jsxs)("div",{className:"flex flex-col gap-2 border border-unfocused-border-color rounded-geist p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[n?(0,r.jsx)(i.default,{src:n,alt:"封面素材预览",width:96,height:64,className:"w-[96px] h-[64px] rounded-md object-cover",unoptimized:!0}):(0,r.jsx)("div",{className:"w-[96px] h-[64px] rounded-md bg-muted flex items-center justify-center text-xs text-subtitle",children:"无预览"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-2",children:["url"===e.type?(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:null!==(o=e.url)&&void 0!==o?o:"",onChange:e=>tE(t,{url:e.currentTarget.value}),placeholder:"https://..."}):(0,r.jsx)("div",{className:"text-xs text-subtitle",children:"上传素材"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-subtitle",children:"显示帧数"}),(0,r.jsx)("input",{className:"leading-[1.7] w-24 rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:1,value:void 0!==e.durationInFrames?e.durationInFrames:"",onChange:e=>{let o=e.currentTarget.value,r=o?Number(o):void 0;tE(t,{durationInFrames:r&&r>0?r:void 0})}})]})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{type:"button",className:"text-xs border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color text-geist-error",onClick:()=>tR(t),children:"删除"})})]},"cover-image-".concat(null!==(a=null!==(l=e.mediaId)&&void 0!==l?l:e.url)&&void 0!==a?a:t))})})]}):null,(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["多图素材链接（每行一条）",(0,r.jsx)("textarea",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none min-h-[96px]",value:ed,onChange:e=>tU(e.currentTarget.value),placeholder:"https://... https://..."})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["上传多张图片",(0,r.jsx)("input",{className:"text-sm",type:"file",accept:"image/*",multiple:!0,onChange:tz})]}),X.length>0?(0,r.jsxs)("div",{className:"flex flex-col gap-3 text-sm text-foreground",children:[(0,r.jsx)("div",{className:"font-medium text-foreground",children:"多图素材列表"}),(0,r.jsx)("div",{className:"flex flex-col gap-3",children:X.map((e,t)=>{var o,l,a;let n="upload"===e.type?e.mediaId?ty.get(e.mediaId):void 0:e.url;return(0,r.jsxs)("div",{className:"flex flex-col gap-2 border border-unfocused-border-color rounded-geist p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[n?(0,r.jsx)(i.default,{src:n,alt:"多图素材预览",width:96,height:64,className:"w-[96px] h-[64px] rounded-md object-cover",unoptimized:!0}):(0,r.jsx)("div",{className:"w-[96px] h-[64px] rounded-md bg-muted flex items-center justify-center text-xs text-subtitle",children:"无预览"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-2",children:["url"===e.type?(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:null!==(o=e.url)&&void 0!==o?o:"",onChange:e=>tO(t,{url:e.currentTarget.value}),placeholder:"https://..."}):(0,r.jsx)("div",{className:"text-xs text-subtitle",children:"上传素材"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-subtitle",children:"显示帧数"}),(0,r.jsx)("input",{className:"leading-[1.7] w-24 rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:1,value:void 0!==e.durationInFrames?e.durationInFrames:"",onChange:e=>{let o=e.currentTarget.value,r=o?Number(o):void 0;tO(t,{durationInFrames:r&&r>0?r:void 0})}})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"button",className:"text-xs border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color",onClick:()=>tT(t,t-1),disabled:0===t,children:"上移"}),(0,r.jsx)("button",{type:"button",className:"text-xs border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color",onClick:()=>tT(t,t+1),disabled:t===X.length-1,children:"下移"}),(0,r.jsx)("button",{type:"button",className:"text-xs border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color text-geist-error",onClick:()=>tM(t),children:"删除"})]})]},"".concat(e.type,"-").concat(null!==(a=null!==(l=e.mediaId)&&void 0!==l?l:e.url)&&void 0!==a?a:t))})})]}):null,(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["单图特效",(0,r.jsxs)("select",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:e_,onChange:e=>eJ(e.currentTarget.value),children:[(0,r.jsx)("option",{value:"none",children:"无特效"}),(0,r.jsx)("option",{value:"zoom-in",children:"轻微放大"}),(0,r.jsx)("option",{value:"zoom-out",children:"轻微缩小"})]})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["多图过渡",(0,r.jsxs)("select",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:eY,onChange:e=>eG(e.currentTarget.value),children:[(0,r.jsx)("option",{value:"fade",children:"淡入淡出"}),(0,r.jsx)("option",{value:"none",children:"无过渡"})]})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["视频素材链接",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:et,onChange:e=>{let t=e.currentTarget.value;eo(t),"mixed"!==eD&&eL("video"),E(void 0),V(void 0),K(e=>{let o=e.filter(e=>"upload"===e.type),r=t.trim();return r?[...o,{type:"url",url:r}]:o})},placeholder:"https://..."})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["上传视频素材",(0,r.jsx)("input",{className:"text-sm",type:"file",accept:"video/*",onChange:tS})]}),H.length>0?(0,r.jsxs)("div",{className:"flex flex-col gap-3 text-sm text-foreground",children:[(0,r.jsx)("div",{className:"font-medium text-foreground",children:"视频素材列表"}),(0,r.jsx)("div",{className:"flex flex-col gap-3",children:H.map((e,t)=>{var o,l,a;let n="upload"===e.type?e.mediaId?tm.get(e.mediaId):void 0:e.url;return(0,r.jsxs)("div",{className:"flex flex-col gap-2 border border-unfocused-border-color rounded-geist p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[n?(0,r.jsx)("video",{className:"w-[140px] h-[88px] rounded-md bg-muted object-cover",src:n,controls:!0,muted:!0,playsInline:!0}):(0,r.jsx)("div",{className:"w-[140px] h-[88px] rounded-md bg-muted flex items-center justify-center text-xs text-subtitle",children:"无预览"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-2",children:["url"===e.type?(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:null!==(o=e.url)&&void 0!==o?o:"",onChange:e=>tL(t,{url:e.currentTarget.value}),placeholder:"https://..."}):(0,r.jsx)("div",{className:"text-xs text-subtitle",children:"上传素材"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-subtitle",children:"显示帧数"}),(0,r.jsx)("input",{className:"leading-[1.7] w-24 rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:1,value:void 0!==e.durationInFrames?e.durationInFrames:"",onChange:e=>{let o=e.currentTarget.value,r=o?Number(o):void 0;tL(t,{durationInFrames:r&&r>0?r:void 0})}})]})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{type:"button",className:"text-xs border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color text-geist-error",onClick:()=>tD(t),children:"删除"})})]},"cover-video-".concat(null!==(a=null!==(l=e.mediaId)&&void 0!==l?l:e.url)&&void 0!==a?a:t))})})]}):null,(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["音频素材链接",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:ei,onChange:e=>{let t=e.currentTarget.value;es(t),en(void 0),J(void 0),W(e=>{let o=e.filter(e=>"upload"===e.type),r=t.trim();return r?[...o,{type:"url",url:r}]:o})},placeholder:"https://..."})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["上传音频素材",(0,r.jsx)("input",{className:"text-sm",type:"file",accept:"audio/*",onChange:tk})]}),Q.length>0?(0,r.jsxs)("div",{className:"flex flex-col gap-3 text-sm text-foreground",children:[(0,r.jsx)("div",{className:"font-medium text-foreground",children:"音频素材列表"}),(0,r.jsx)("div",{className:"flex flex-col gap-3",children:Q.map((e,t)=>{var o,l,a;let n="upload"===e.type?e.mediaId?tx.get(e.mediaId):void 0:e.url;return(0,r.jsxs)("div",{className:"flex flex-col gap-2 border border-unfocused-border-color rounded-geist p-3",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:n?(0,r.jsx)("audio",{className:"w-full",controls:!0,src:n}):(0,r.jsx)("div",{className:"w-full h-12 rounded-md bg-muted flex items-center justify-center text-xs text-subtitle",children:"无预览"})}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:"url"===e.type?(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:null!==(o=e.url)&&void 0!==o?o:"",onChange:e=>tq(t,{url:e.currentTarget.value}),placeholder:"https://..."}):(0,r.jsx)("div",{className:"text-xs text-subtitle",children:"上传素材"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-subtitle",children:"显示帧数"}),(0,r.jsx)("input",{className:"leading-[1.7] w-24 rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:1,value:void 0!==e.durationInFrames?e.durationInFrames:"",onChange:e=>{let o=e.currentTarget.value,r=o?Number(o):void 0;tq(t,{durationInFrames:r&&r>0?r:void 0})}})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{type:"button",className:"text-xs border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color text-geist-error",onClick:()=>tP(t),children:"删除"})})]},"audio-".concat(null!==(a=null!==(l=e.mediaId)&&void 0!==l?l:e.url)&&void 0!==a?a:t))})})]}):null,(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["徽标素材链接",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:er,onChange:e=>{el(e.currentTarget.value),L(void 0),A(void 0),em(void 0)},placeholder:"https://..."})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["上传徽标素材",(0,r.jsx)("input",{className:"text-sm",type:"file",accept:"image/*",onChange:tF})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["字幕内容（每行一句）",(0,r.jsx)("textarea",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none min-h-[96px]",value:ey,onChange:e=>eN(e.currentTarget.value),placeholder:"第一句字幕 第二句字幕"})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["字幕字号",(0,r.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",type:"number",min:12,max:120,value:eC,onChange:e=>eU(e.currentTarget.value),placeholder:"例如：28"})]}),(0,r.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-foreground",children:["字幕字体",(0,r.jsxs)("select",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:eT,onChange:e=>eM(e.currentTarget.value),children:[(0,r.jsx)("option",{value:"inter",children:"Inter"}),(0,r.jsx)("option",{value:"system",children:"系统默认"}),(0,r.jsx)("option",{value:"serif",children:"衬线字体"})]})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm text-foreground",children:[(0,r.jsx)("input",{type:"checkbox",checked:eB,onChange:e=>eA(e.currentTarget.checked)}),"展示背景光环"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm text-foreground",children:[(0,r.jsx)("input",{type:"checkbox",checked:eH,onChange:e=>eK(e.currentTarget.checked)}),"添加到渲染功能页面"]}),eQ?(0,r.jsx)("div",{className:"text-geist-error text-sm",children:eQ}):null,eX?(0,r.jsx)("div",{className:"text-sm text-foreground",children:eX}):null,(0,r.jsx)("button",{type:"submit",className:"border-foreground border rounded-geist bg-foreground text-background px-geist-half font-geist h-10 font-medium transition-all duration-150 ease-in-out inline-flex items-center justify-center text-sm hover:bg-background hover:text-foreground hover:border-focused-border-color",children:e$?"保存修改":"保存作品"})]}),(0,r.jsxs)("div",{className:"mt-8 border border-unfocused-border-color rounded-geist bg-background p-geist",children:[(0,r.jsx)("h3",{className:"text-base font-bold text-foreground mb-3",children:"预览效果"}),(0,r.jsx)("div",{className:"rounded-2xl p-6",style:te,children:"left"===I?(0,r.jsxs)("div",{className:"flex items-center justify-between gap-8",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[y?(0,r.jsx)("span",{className:"text-xs font-semibold px-2 py-1 rounded-full w-fit",style:{backgroundColor:C,color:"#ffffff"},children:y}):null,th?(0,r.jsx)(i.default,{src:th,alt:"徽标预览",width:72,height:72,className:"w-[72px] h-[72px] object-contain",unoptimized:!0}):null,td?(0,r.jsx)("div",{className:"font-bold",style:{color:F,fontSize:"".concat(tt,"px")},children:ti}):null,tu?(0,r.jsx)("div",{className:"text-sm",style:{color:F,fontSize:"".concat(to,"px")},children:ts}):null]}),"video"===tI&&tv?(0,r.jsx)("video",{className:"w-[220px] h-[140px] rounded-xl shadow-md",src:tv,muted:!0,playsInline:!0,loop:!0,autoPlay:!0,style:{objectFit:eP,objectPosition:eO}}):"multi-image"===tI&&tN[0]?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(i.default,{src:tN[0],alt:"作品素材预览",width:220,height:140,className:"w-[220px] h-[140px] rounded-xl shadow-md",style:{objectFit:eP,objectPosition:eO},unoptimized:!0}),(0,r.jsxs)("div",{className:"text-[11px] text-subtitle",children:["共 ",tN.length," 张"]})]}):"image"===tI&&tb?(0,r.jsx)(i.default,{src:tb,alt:"作品素材预览",width:220,height:140,className:"w-[220px] h-[140px] rounded-xl shadow-md",style:{objectFit:eP,objectPosition:eO},unoptimized:!0}):(0,r.jsx)("div",{className:"w-[220px] h-[140px] rounded-xl border border-dashed border-unfocused-border-color flex items-center justify-center text-xs text-subtitle",children:"暂未上传素材"})]}):"image-top"===I?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:["video"===tI&&tv?(0,r.jsx)("video",{className:"w-[320px] h-[180px] rounded-xl shadow-md",src:tv,muted:!0,playsInline:!0,loop:!0,autoPlay:!0,style:{objectFit:eP,objectPosition:eO}}):"multi-image"===tI&&tN[0]?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(i.default,{src:tN[0],alt:"作品素材预览",width:320,height:180,className:"w-[320px] h-[180px] rounded-xl shadow-md",style:{objectFit:eP,objectPosition:eO},unoptimized:!0}),(0,r.jsxs)("div",{className:"text-[11px] text-subtitle",children:["共 ",tN.length," 张"]})]}):"image"===tI&&tb?(0,r.jsx)(i.default,{src:tb,alt:"作品素材预览",width:320,height:180,className:"w-[320px] h-[180px] rounded-xl shadow-md",style:{objectFit:eP,objectPosition:eO},unoptimized:!0}):(0,r.jsx)("div",{className:"w-[320px] h-[180px] rounded-xl border border-dashed border-unfocused-border-color flex items-center justify-center text-xs text-subtitle",children:"暂未上传素材"}),y?(0,r.jsx)("span",{className:"text-xs font-semibold px-2 py-1 rounded-full w-fit",style:{backgroundColor:C,color:"#ffffff"},children:y}):null,td?(0,r.jsx)("div",{className:"font-bold",style:{color:F,fontSize:"".concat(tt,"px")},children:ti}):null,tu?(0,r.jsx)("div",{className:"text-sm",style:{color:F,fontSize:"".concat(to,"px")},children:ts}):null,th?(0,r.jsx)(i.default,{src:th,alt:"徽标预览",width:72,height:72,className:"w-[72px] h-[72px] object-contain",unoptimized:!0}):null]}):(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[y?(0,r.jsx)("span",{className:"text-xs font-semibold px-2 py-1 rounded-full w-fit",style:{backgroundColor:C,color:"#ffffff"},children:y}):null,th?(0,r.jsx)(i.default,{src:th,alt:"徽标预览",width:72,height:72,className:"w-[72px] h-[72px] object-contain",unoptimized:!0}):null,td?(0,r.jsx)("div",{className:"font-bold",style:{color:F,fontSize:"".concat(tt,"px")},children:ti}):null,tu?(0,r.jsx)("div",{className:"text-sm",style:{color:F,fontSize:"".concat(to,"px")},children:ts}):null,"video"===tI&&tv?(0,r.jsx)("video",{className:"w-[320px] h-[180px] rounded-xl shadow-md",src:tv,muted:!0,playsInline:!0,loop:!0,autoPlay:!0,style:{objectFit:eP,objectPosition:eO}}):"multi-image"===tI&&tN[0]?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(i.default,{src:tN[0],alt:"作品素材预览",width:320,height:180,className:"w-[320px] h-[180px] rounded-xl shadow-md",style:{objectFit:eP,objectPosition:eO},unoptimized:!0}),(0,r.jsxs)("div",{className:"text-[11px] text-subtitle",children:["共 ",tN.length," 张"]})]}):"image"===tI&&tb?(0,r.jsx)(i.default,{src:tb,alt:"作品素材预览",width:320,height:180,className:"w-[320px] h-[180px] rounded-xl shadow-md",style:{objectFit:eP,objectPosition:eO},unoptimized:!0}):(0,r.jsx)("div",{className:"w-[320px] h-[180px] rounded-xl border border-dashed border-unfocused-border-color flex items-center justify-center text-xs text-subtitle",children:"暂未上传素材"})]})}),tj?(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("audio",{src:tj,controls:!0,className:"w-full"})}):null]})]})},v=()=>(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{className:"max-w-screen-md m-auto mb-12 mt-16 font-geist px-4 text-sm text-subtitle",children:"页面加载中..."}),children:(0,r.jsx)(b,{})})}},e=>{var t=t=>e(e.s=t);e.O(0,[244,594,766,441,684,358],()=>t(6193)),_N_E=e.O()}]);