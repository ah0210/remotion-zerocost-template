(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1841:(e,t,r)=>{Promise.resolve().then(r.bind(r,3418))},1845:()=>{},3065:(e,t,r)=>{"use strict";r.d(t,{BL:()=>d,Np:()=>s,SU:()=>i,Yd:()=>o,cB:()=>u,cS:()=>c});var a=r(5594);let o="MyComp",l=a.z.enum(["none","zoom-in","zoom-out"]),n=a.z.enum(["none","fade"]);a.z.object({title:a.z.string().optional(),subtitle:a.z.string().optional(),badgeText:a.z.string().optional(),coverImageDataUrl:a.z.string().optional(),coverVideoDataUrl:a.z.string().optional(),logoImageDataUrl:a.z.string().optional(),imageArray:a.z.array(a.z.string()).optional(),imageSequence:a.z.array(a.z.object({src:a.z.string(),durationInFrames:a.z.number().optional(),effect:l.optional()})).optional(),coverImageSequence:a.z.array(a.z.object({src:a.z.string(),durationInFrames:a.z.number().optional()})).optional(),coverVideoSequence:a.z.array(a.z.object({src:a.z.string(),durationInFrames:a.z.number().optional()})).optional(),audioSequence:a.z.array(a.z.object({src:a.z.string(),durationInFrames:a.z.number().optional()})).optional(),imageEffect:l.optional(),transitionEffect:n.optional(),imageDurationInFrames:a.z.number().optional(),subtitles:a.z.array(a.z.string()).optional(),backgroundColor:a.z.string().optional(),textColor:a.z.string().optional(),accentColor:a.z.string().optional(),titleFontSize:a.z.number().optional(),subtitleFontSize:a.z.number().optional(),titleDisplayFrames:a.z.number().optional(),captionsFontSize:a.z.number().optional(),captionsFontFamily:a.z.string().optional(),durationInFrames:a.z.number().optional(),coverMediaType:a.z.enum(["image","video","mixed"]).optional(),audioDataUrl:a.z.string().optional(),mediaFit:a.z.enum(["cover","contain"]).optional(),mediaPosition:a.z.enum(["center","top","bottom","left","right"]).optional(),layout:a.z.enum(["center","left","image-top","full-screen"]).optional(),showRings:a.z.boolean().optional()});let s={title:"我的 Remotion 视频",subtitle:"用你自己的素材快速生成视频",badgeText:"新作品",imageArray:[],imageSequence:[],imageEffect:"none",transitionEffect:"fade",imageDurationInFrames:30,subtitles:[],backgroundColor:"#ffffff",textColor:"#111827",accentColor:"#2563eb",titleFontSize:70,subtitleFontSize:24,titleDisplayFrames:90,captionsFontSize:28,captionsFontFamily:"inter",durationInFrames:200,coverMediaType:"image",mediaFit:"cover",mediaPosition:"center",layout:"center",showRings:!0},i=200,d=1280,c=720,u=30},3418:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>W});var a=r(5155),o=r(815),l=r(2115),n=r(6874),s=r.n(n),i=r(5695),d=r(3065);let c=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"self-end",children:t})},u=()=>(0,a.jsx)("div",{className:"w-geist-quarter h-geist-quarter"});var m=r(4068),f=r(9732);let{path:p}=(0,m.jp)({height:24,width:8,cornerRadius:4}),g=(0,f.ON)(p,46,3),h=e=>{let{size:t}=e,r=(0,l.useMemo)(()=>({width:t,height:t}),[t]);return(0,a.jsx)("svg",{style:r,viewBox:"0 0 ".concat(100," ").concat(100),children:Array(12).fill(!0).map((e,t)=>(0,a.jsx)("path",{className:"animate-spinner",style:{rotate:"".concat(t*Math.PI*2/12,"rad"),transformOrigin:"center center",animationDelay:"".concat(.1*t-1.2000000000000002,"s")},d:g,fill:"var(--foreground)"},t))})};var x=r(2596),v=r(9688);let b=(0,l.forwardRef)((e,t)=>{let{onClick:r,disabled:o,children:l,loading:n,secondary:s}=e;return(0,a.jsxs)("button",{ref:t,className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,v.QP)((0,x.$)(t))}("border-foreground border rounded-geist bg-foreground text-background px-geist-half font-geist h-10 font-medium transition-all duration-150 ease-in-out inline-flex items-center appearance-none text-sm hover:bg-background hover:text-foreground hover:border-focused-border-color disabled:bg-button-disabled-color disabled:text-disabled-text-color disabled:border-unfocused-border-color disabled:cursor-not-allowed",s?"bg-background text-foreground border-unfocused-border-color":void 0),onClick:r,disabled:o,children:[n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{size:20}),(0,a.jsx)(u,{})]}),l]})}),j=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"border border-unfocused-border-color p-geist rounded-geist bg-background flex flex-col",children:t})},y=e=>{let{message:t}=e;return(0,a.jsxs)("div",{className:"text-geist-error font-geist py-geist-half",children:[(0,a.jsxs)("svg",{fill:"none",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",className:"h-5 align-text-bottom mr-1.5 inline",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"var(--geist-fill)"}),(0,a.jsx)("path",{d:"M12 8v4",stroke:"currentColor"}),(0,a.jsx)("path",{d:"M12 16h.01",stroke:"currentColor"})]}),(0,a.jsx)("strong",{children:"错误："})," ",t]})},I=e=>{let{text:t,setText:r,disabled:o}=e,n=(0,l.useCallback)(e=>{r(e.currentTarget.value)},[r]);return(0,a.jsx)("input",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",disabled:o,name:"title",value:t,onChange:n})},N=e=>{let{progress:t}=e,r=(0,l.useMemo)(()=>({width:"".concat(100*t,"%")}),[t]);return(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"w-full h-2.5 rounded-md appearance-none bg-unfocused-border-color mt-2.5 mb-6",children:(0,a.jsx)("div",{className:"bg-foreground h-2.5 rounded-md transition-all ease-in-out duration-100",style:r})})})},F=e=>{let t=((null==e?void 0:e.trim())?e.trim():"untitled").replace(/[^a-zA-Z0-9]/g,"_");return"".concat(t,".mp4")},w=(e,t)=>{let[a,o]=(0,l.useState)({status:"init"}),n=(0,l.useCallback)(async()=>{try{o({status:"preparing"});let{renderMediaOnWeb:a}=await r.e(431).then(r.bind(r,2431)),l=await a({composition:e,inputProps:t,onProgress:t=>{var r,a;let l=null!==(a=null!==(r=t.encodedFrames)&&void 0!==r?r:t.renderedFrames)&&void 0!==a?a:0,n=0===e.durationInFrames?0:l/e.durationInFrames,s=Math.max(0,Math.min(1,n));o({status:"rendering",progress:s})}}),n=await l.getBlob();o({status:"done",videoBlob:n,fileName:F(t.title)})}catch(e){o({status:"error",error:e})}},[e,t]),s=(0,l.useCallback)(()=>{o({status:"init"})},[]),i=(0,l.useCallback)(()=>{if("done"===a.status){let e=URL.createObjectURL(a.videoBlob),t=document.createElement("a");t.href=e,t.download=a.fileName,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e)}},[a]);return(0,l.useMemo)(()=>({renderMedia:n,state:a,undo:s,downloadVideo:i}),[n,a,s,i])},k=e=>{let{text:t,setText:r,inputProps:o,composition:l}=e,{renderMedia:n,state:s,undo:i,downloadVideo:d}=w(l,o),m="preparing"!==s.status;return(0,a.jsxs)(j,{children:["init"===s.status||"preparing"===s.status||"error"===s.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{disabled:"preparing"===s.status,setText:r,text:t}),(0,a.jsx)(c,{children:(0,a.jsx)(b,{disabled:!m,loading:"preparing"===s.status,onClick:n,children:"开始渲染"})}),"error"===s.status?(0,a.jsx)(y,{message:s.error.message}):null]}):null,"bundling"===s.status||"rendering"===s.status||"finalizing"===s.status||"done"===s.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N,{progress:"bundling"===s.status?s.progress:"rendering"===s.status?s.progress:"finalizing"===s.status?s.progress:1}),(0,a.jsx)(u,{}),(0,a.jsxs)(c,{children:["done"===s.status?(0,a.jsx)(b,{onClick:d,children:"下载视频"}):null,"bundling"===s.status?(0,a.jsx)(b,{disabled:!0,children:"打包中..."}):null,"rendering"===s.status?(0,a.jsx)(b,{disabled:!0,children:"渲染中..."}):null,"finalizing"===s.status?(0,a.jsx)(b,{disabled:!0,children:"生成中..."}):null,(0,a.jsx)(u,{}),(0,a.jsx)(b,{onClick:i,secondary:!0,children:"重新开始"})]})]}):null]})},S=e=>{let{title:t,description:r,href:o}=e;return(0,a.jsx)("a",{href:o,target:"_blank",rel:"noreferrer",className:"flex-1",children:(0,a.jsxs)("div",{className:"transition-transform duration-200 ease-in-out p-2.5 group hover:-translate-y-0.5",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start",children:[(0,a.jsx)("h4",{className:"my-3 font-bold text-foreground",children:t}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("svg",{className:"opacity-0 transition-opacity duration-200 ease-in-out group-hover:opacity-100",height:"1em",viewBox:"0 0 448 512",children:(0,a.jsx)("path",{fill:"var(--foreground)",d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"})})]}),(0,a.jsx)("p",{className:"text-sm leading-normal text-subtitle mb-6",children:r})]})})},U=()=>(0,a.jsxs)("div",{className:"flex flex-col md:flex-row font-geist",children:[(0,a.jsx)(S,{href:"https://www.remotion.dev/docs/the-fundamentals",title:"学习 Remotion",description:"了解如何用 React 定制这段视频。"}),(0,a.jsx)(S,{href:"https://www.17you.com",title:"查看源码",description:"前往该应用的 GitHub 仓库。"}),(0,a.jsx)(S,{href:"https://remotion.dev/discord",title:"加入社区",description:"在 Discord 与其他开发者交流。"})]});var M=r(697),z=r(4004);let R=e=>{let{outProgress:t}=e,{fps:r}=(0,M.Bk)(),o=(0,M.UC)(),n=(0,M.oz)({fps:r,frame:o,config:{damping:200}}),s=(0,M.oz)({fps:r,frame:o-15,config:{damping:200}}),i=(0,M.oz)({fps:r,frame:o-30,config:{damping:200,mass:3},durationInFrames:30}),d=(0,l.useMemo)(()=>({height:140,borderRadius:70,scale:String(1-t)}),[t]),c="M 60.0568 54 v 71.97",u="M 63.47956 56.17496 L 144.7535 161.1825",m="M 121 54 L 121 126",p=(0,f.Z7)(n,c),g=(0,f.Z7)(s,u),h=(0,f.Z7)((0,M.GW)(i,[0,1],[0,.7]),m);return(0,a.jsxs)("svg",{style:d,fill:"none",viewBox:"0 0 180 180",children:[(0,a.jsx)("mask",{height:"180",id:"mask",className:"[mask-type:alpha]",width:"180",x:"0",y:"0",children:(0,a.jsx)("circle",{cx:"90",cy:"90",fill:"black",r:"90"})}),(0,a.jsx)("mask",{id:"n-mask",className:"[mask-type:alpha]",children:(0,a.jsx)("path",{d:"M149.508 157.52L69.142 54H54V125.97H66.1136V69.3836L139.999 164.845C143.333 162.614 146.509 160.165 149.508 157.52Z",fill:"black"})}),(0,a.jsxs)("g",{mask:"url(#mask)",children:[(0,a.jsx)("circle",{cx:"90",cy:"90",fill:"black",r:"90"}),(0,a.jsxs)("g",{stroke:"url(#gradient0)",mask:"url(#n-mask)",children:[(0,a.jsx)("path",{strokeWidth:"12.1136",d:c,strokeDasharray:p.strokeDasharray,strokeDashoffset:p.strokeDashoffset}),(0,a.jsx)("path",{strokeWidth:12.1136,d:u,strokeDasharray:g.strokeDasharray,strokeDashoffset:g.strokeDashoffset})]}),(0,a.jsx)("path",{stroke:"url(#gradient1)",d:m,strokeDasharray:h.strokeDasharray,strokeDashoffset:h.strokeDashoffset,strokeWidth:"12"})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"gradient0",x1:"109",x2:"144.5",y1:"116.5",y2:"160.5",children:[(0,a.jsx)("stop",{stopColor:"white"}),(0,a.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]}),(0,a.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"gradient1",x1:"121",x2:"120.799",y1:"54",y2:"106.875",children:[(0,a.jsx)("stop",{stopColor:"white"}),(0,a.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]})]})]})};var L=r(9756);let C=e=>{let{radius:t,color:r}=e;return(0,a.jsx)(M.H1,{style:{justifyContent:"center",alignItems:"center"},children:(0,a.jsx)("div",{style:{height:2*t,width:2*t,backgroundColor:r},className:"rounded-[50%] absolute shadow-[0px_0px_100px_rgba(0,0,0,0.05)]"})})},D=e=>{let{outProgress:t,accentColor:r}=e,{height:o}=(0,M.Bk)();return(0,a.jsx)(M.H1,{style:{transform:"scale(".concat(1/(1-t),")")},children:[,,,,,].fill(!0).map((e,t)=>(0,a.jsx)(C,{radius:.3*o*t,color:(0,M.Y7)(t,[0,4],[null!=r?r:"#fff","#fff"])},t)).reverse()})},E=e=>{let{children:t,centered:r=!0,enableMask:o=!0}=e,{fps:n}=(0,M.Bk)(),s=(0,M.UC)(),i=(0,M.oz)({fps:n,frame:s,config:{damping:200},durationInFrames:80}),d=(0,M.GW)(i,[0,1],[200,0]),c=Math.max(0,d-60),u="linear-gradient(-45deg, transparent ".concat(c,"%, black ").concat(d,"%)"),m=(0,l.useMemo)(()=>o?{maskImage:u,WebkitMaskImage:u}:{},[o,u]);return(0,a.jsx)(M.H1,{style:m,children:(0,a.jsx)(M.H1,{className:r?"justify-center items-center":"",children:t})})};(0,L.Al)("normal",{subsets:["latin"],weights:["400","700"]});let P=e=>{let{title:t,subtitle:r,badgeText:o,coverImageDataUrl:l,coverVideoDataUrl:n,logoImageDataUrl:s,imageArray:i,imageSequence:d,coverImageSequence:c,coverVideoSequence:u,audioSequence:m,imageEffect:f,transitionEffect:p,imageDurationInFrames:g,subtitles:h,audioDataUrl:x,backgroundColor:v,textColor:b,accentColor:j,titleFontSize:y,subtitleFontSize:I,titleDisplayFrames:N,captionsFontSize:F,captionsFontFamily:w,coverMediaType:k,mediaFit:S,mediaPosition:U,layout:C,showRings:P}=e,O=(0,M.UC)(),{fps:B,durationInFrames:q}=(0,M.Bk)(),V=2*B,T=+B,W=N&&N>0?Math.floor(N):0,_=F&&F>0?F:28,G="serif"===w?"serif":"system"===w?"system-ui":L.mw,H=null!=S?S:"cover",A=null!=U?U:"center",Z=null!=k?k:"image",Y=(null!=i?i:[]).map(e=>e.trim()).filter(Boolean),J=(null!=d?d:[]).map(e=>({src:e.src.trim(),durationInFrames:e.durationInFrames,effect:e.effect})).filter(e=>e.src.length>0),Q=(null!=c?c:[]).map(e=>({src:e.src.trim(),durationInFrames:e.durationInFrames})).filter(e=>e.src.length>0),$=(null!=u?u:[]).map(e=>({src:e.src.trim(),durationInFrames:e.durationInFrames})).filter(e=>e.src.length>0),K=(null!=m?m:[]).map(e=>({src:e.src.trim(),durationInFrames:e.durationInFrames})).filter(e=>e.src.length>0),X=(null!=h?h:[]).map(e=>e.trim()).filter(Boolean),ee=null!=f?f:"none",et=null!=p?p:"fade",er=null==t?void 0:t.trim(),ea=null==r?void 0:r.trim(),eo=!!er,el=!!ea,en=W>0&&O<W,es=(0,M.oz)({fps:B,frame:O,config:{damping:200},durationInFrames:T,delay:V}),ei=Math.max(1,Math.floor(null!=g?g:B)),ed=(e,t)=>{let r=e?Math.floor(e):0;return r>0?r:t},ec=(e,t)=>{if(0===e.length)return[];let r=[],a=0;for(let o of e){let e=ed(o.durationInFrames,t);r.push({src:o.src,start:a,durationInFrames:e}),a+=e}return r},eu=J.length>0?J:Y.map(e=>({src:e,durationInFrames:g,effect:ee})),em=Q.length>0?Q:l?[{src:l,durationInFrames:void 0}]:[],ef=$.length>0?$:n?[{src:n,durationInFrames:void 0}]:[],ep=0===em.length&&("video"===Z||"mixed"===Z)&&ef.length>0,eg=ep?[ef[0]]:[],eh=ep?ef.slice(1):ef,ex=em.length>0?em:eg,ev=em.length>0?"image":eg.length>0?"video":null,eb=ec(ex,ei),ej=eb.length>0?eb[eb.length-1].start+eb[eb.length-1].durationInFrames:0,ey=Math.max(0,Math.floor(W>0?Math.max(W,ej):ej)),eI=(()=>{let e=[],t=0;for(let r of[...eu.map(e=>({type:"image",src:e.src,durationInFrames:e.durationInFrames,effect:e.effect})),...eh.map(e=>({type:"video",src:e.src,durationInFrames:e.durationInFrames}))]){let a=ed(r.durationInFrames,ei);e.push({src:r.src,start:t,durationInFrames:a,type:r.type,effect:r.effect}),t+=a}return e})(),eN=eI.length>0?eI[eI.length-1].start+eI[eI.length-1].durationInFrames:Math.max(0,q-ey),eF=Math.max(0,ey-ej),ew="fade"===et&&ey>0&&eN>0?Math.min(Math.floor(.5*B),Math.floor(Math.min(ey,eN)/2)):0,ek=ew>0?(0,M.GW)(O,[ey-ew,ey],[1,0],{extrapolateLeft:"clamp",extrapolateRight:"clamp"}):1,eS=ew>0?(0,M.GW)(O,[ey-ew,ey],[0,1],{extrapolateLeft:"clamp",extrapolateRight:"clamp"}):1,eU=ec(K.length>0?K:x?[{src:x}]:[],ei),eM=(e,t,r,a,o)=>{if(!a&&!o)return 1;let l=r>0&&t-r>r?r:0;return 0===l?1:a&&o?(0,M.GW)(e,[0,l,t-l,t],[0,1,1,0],{extrapolateLeft:"clamp",extrapolateRight:"clamp"}):a?(0,M.GW)(e,[0,l],[0,1],{extrapolateLeft:"clamp",extrapolateRight:"clamp"}):(0,M.GW)(e,[t-l,t],[1,0],{extrapolateLeft:"clamp",extrapolateRight:"clamp"})},ez=X.length>0?Math.max(1,Math.floor(eN/X.length)):0;return(0,a.jsxs)(M.H1,{className:"bg-white",style:{backgroundColor:null!=v?v:"#ffffff"},children:[ey>0?(0,a.jsx)(M.gd,{durationInFrames:ey,children:(0,a.jsx)(M.H1,{style:{opacity:ek},children:eb.length>0?eb.map((e,t)=>{let r=t===eb.length-1,o=e.durationInFrames+(r?eF:0),l=O-e.start,n="fade"===et&&eb.length>1?Math.min(Math.floor(.5*B),Math.floor(o/2)):0,s=eM(l,o,n,n>0,n>0);return(0,a.jsx)(M.gd,{from:e.start,durationInFrames:o,children:"video"===ev?(0,a.jsx)(z.Ce,{src:e.src,className:"absolute inset-0 w-full h-full",style:{objectFit:H,objectPosition:A,opacity:s}}):(0,a.jsx)(M.E9,{src:e.src,alt:"封面素材",className:"absolute inset-0 w-full h-full",style:{objectFit:H,objectPosition:A,opacity:s}})},"cover-".concat(e.src,"-").concat(t))}):null})}):null,P?(0,a.jsxs)(M.gd,{durationInFrames:V+T,children:[(0,a.jsx)(D,{outProgress:es,accentColor:j}),(0,a.jsx)(M.H1,{className:"justify-center items-center",children:(0,a.jsx)(R,{outProgress:es})})]}):null,(0,a.jsx)(M.gd,{from:ey,children:(0,a.jsx)(M.H1,{style:{opacity:eS},children:(0,a.jsx)(E,{centered:"full-screen"!==C,enableMask:"full-screen"!==C,children:"left"===C?(0,a.jsxs)("div",{className:"flex items-center justify-between gap-12 px-24",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6 max-w-[520px]",children:[o?(0,a.jsx)("span",{className:"text-sm font-semibold px-3 py-1 rounded-full w-fit",style:{backgroundColor:null!=j?j:"#2563eb",color:"#ffffff"},children:o}):null,s?(0,a.jsx)(M.E9,{src:s,alt:"作品徽标",className:"w-[120px] h-[120px] object-contain"}):null,null,null]}),eI.length>0?(0,a.jsx)("div",{className:"relative w-[420px] h-[260px] rounded-2xl shadow-lg overflow-hidden",children:eI.map((e,t)=>{var r;let o=O-ey-e.start,l=1===eI.length,n="image"===e.type?null!==(r=e.effect)&&void 0!==r?r:l?ee:"none":"none",s="fade"===et&&eI.length>1?Math.min(Math.floor(.5*B),Math.floor(e.durationInFrames/2)):0,i=s>0&&e.durationInFrames-s>s?s:0,d=i>0?(0,M.GW)(o,[0,i,e.durationInFrames-i,e.durationInFrames],[0,1,1,0],{extrapolateLeft:"clamp",extrapolateRight:"clamp"}):1,c=e.durationInFrames>0?Math.min(1,Math.max(0,o/e.durationInFrames)):0,u="image"===e.type&&l&&"zoom-in"===n?1+.08*c:"image"===e.type&&l&&"zoom-out"===n?1.08-.08*c:1;return(0,a.jsx)(M.gd,{from:e.start,durationInFrames:e.durationInFrames,children:"video"===e.type?(0,a.jsx)(z.Ce,{src:e.src,className:"w-[420px] h-[260px] relative",style:{objectFit:H,objectPosition:A,opacity:d,transform:"scale(".concat(u,")")}}):(0,a.jsx)(M.E9,{src:e.src,alt:"作品素材",className:"w-[420px] h-[260px] relative",style:{objectFit:H,objectPosition:A,opacity:d,transform:"scale(".concat(u,")")}})},"".concat(e.type,"-").concat(e.src,"-").concat(t))})}):null]}):"image-top"===C?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[eI.length>0?(0,a.jsx)("div",{className:"relative w-[520px] h-[300px] rounded-2xl shadow-lg overflow-hidden",children:eI.map((e,t)=>{var r;let o=O-ey-e.start,l=1===eI.length,n="image"===e.type?null!==(r=e.effect)&&void 0!==r?r:l?ee:"none":"none",s="fade"===et&&eI.length>1?Math.min(Math.floor(.5*B),Math.floor(e.durationInFrames/2)):0,i=s>0&&e.durationInFrames-s>s?s:0,d=i>0?(0,M.GW)(o,[0,i,e.durationInFrames-i,e.durationInFrames],[0,1,1,0],{extrapolateLeft:"clamp",extrapolateRight:"clamp"}):1,c=e.durationInFrames>0?Math.min(1,Math.max(0,o/e.durationInFrames)):0,u="image"===e.type&&l&&"zoom-in"===n?1+.08*c:"image"===e.type&&l&&"zoom-out"===n?1.08-.08*c:1;return(0,a.jsx)(M.gd,{from:e.start,durationInFrames:e.durationInFrames,children:"video"===e.type?(0,a.jsx)(z.Ce,{src:e.src,className:"w-[520px] h-[300px] relative",style:{objectFit:H,objectPosition:A,opacity:d,transform:"scale(".concat(u,")")}}):(0,a.jsx)(M.E9,{src:e.src,alt:"作品素材",className:"w-[520px] h-[300px] relative",style:{objectFit:H,objectPosition:A,opacity:d,transform:"scale(".concat(u,")")}})},"".concat(e.type,"-").concat(e.src,"-").concat(t))})}):null,o?(0,a.jsx)("span",{className:"text-sm font-semibold px-3 py-1 rounded-full w-fit",style:{backgroundColor:null!=j?j:"#2563eb",color:"#ffffff"},children:o}):null,null,null,s?(0,a.jsx)(M.E9,{src:s,alt:"作品徽标",className:"w-[120px] h-[120px] object-contain"}):null]}):"full-screen"===C?(0,a.jsxs)("div",{className:"relative w-full h-full",children:[eI.length>0?(0,a.jsx)("div",{className:"absolute inset-0",children:eI.map((e,t)=>{var r;let o=O-ey-e.start,l=1===eI.length,n="image"===e.type?null!==(r=e.effect)&&void 0!==r?r:l?ee:"none":"none",s="fade"===et&&eI.length>1?Math.min(Math.floor(.5*B),Math.floor(e.durationInFrames/2)):0,i=s>0&&e.durationInFrames-s>s?s:0,d=i>0?(0,M.GW)(o,[0,i,e.durationInFrames-i,e.durationInFrames],[0,1,1,0],{extrapolateLeft:"clamp",extrapolateRight:"clamp"}):1,c=e.durationInFrames>0?Math.min(1,Math.max(0,o/e.durationInFrames)):0,u="image"===e.type&&l&&"zoom-in"===n?1+.08*c:"image"===e.type&&l&&"zoom-out"===n?1.08-.08*c:1;return(0,a.jsx)(M.gd,{from:e.start,durationInFrames:e.durationInFrames,children:"video"===e.type?(0,a.jsx)(z.Ce,{src:e.src,className:"absolute inset-0 w-full h-full",style:{objectFit:H,objectPosition:A,opacity:d,transform:"scale(".concat(u,")")}}):(0,a.jsx)(M.E9,{src:e.src,alt:"作品素材",className:"absolute inset-0 w-full h-full",style:{objectFit:H,objectPosition:A,opacity:d,transform:"scale(".concat(u,")")}})},"".concat(e.type,"-").concat(e.src,"-").concat(t))})}):null,null]}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[o?(0,a.jsx)("span",{className:"text-sm font-semibold px-3 py-1 rounded-full w-fit",style:{backgroundColor:null!=j?j:"#2563eb",color:"#ffffff"},children:o}):null,s?(0,a.jsx)(M.E9,{src:s,alt:"作品徽标",className:"w-[120px] h-[120px] object-contain"}):null,null,null,eI.length>0?(0,a.jsx)("div",{className:"relative w-[460px] h-[260px] rounded-2xl shadow-lg overflow-hidden",children:eI.map((e,t)=>{var r;let o=O-ey-e.start,l=1===eI.length,n="image"===e.type?null!==(r=e.effect)&&void 0!==r?r:l?ee:"none":"none",s="fade"===et&&eI.length>1?Math.min(Math.floor(.5*B),Math.floor(e.durationInFrames/2)):0,i=s>0&&e.durationInFrames-s>s?s:0,d=i>0?(0,M.GW)(o,[0,i,e.durationInFrames-i,e.durationInFrames],[0,1,1,0],{extrapolateLeft:"clamp",extrapolateRight:"clamp"}):1,c=e.durationInFrames>0?Math.min(1,Math.max(0,o/e.durationInFrames)):0,u="image"===e.type&&l&&"zoom-in"===n?1+.08*c:"image"===e.type&&l&&"zoom-out"===n?1.08-.08*c:1;return(0,a.jsx)(M.gd,{from:e.start,durationInFrames:e.durationInFrames,children:"video"===e.type?(0,a.jsx)(z.Ce,{src:e.src,className:"w-[460px] h-[260px]",style:{objectFit:H,objectPosition:A,opacity:d,transform:"scale(".concat(u,")")}}):(0,a.jsx)(M.E9,{src:e.src,alt:"作品素材",className:"w-[460px] h-[260px]",style:{objectFit:H,objectPosition:A,opacity:d,transform:"scale(".concat(u,")")}})},"".concat(e.type,"-").concat(e.src,"-").concat(t))})}):null]})})})}),en&&(eo||el)?(0,a.jsx)(M.gd,{durationInFrames:W,children:(0,a.jsx)(M.H1,{className:"items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 px-12",children:[eo?(0,a.jsx)("h1",{className:"font-bold text-center",style:{fontFamily:L.mw,color:null!=b?b:"#ffffff",fontSize:"".concat(null!=y?y:"center"===C?70:64,"px")},children:er}):null,el?(0,a.jsx)("p",{className:"text-center",style:{color:null!=b?b:"#ffffff",fontSize:"".concat(null!=I?I:24,"px")},children:ea}):null]})})}):null,X.length>0?X.map((e,t)=>{let r=t===X.length-1;return(0,a.jsx)(M.gd,{from:ey+t*ez,durationInFrames:r?eN-ez*t:ez,children:(0,a.jsx)(M.H1,{className:"items-center justify-end pb-12",children:(0,a.jsx)("div",{className:"px-5 py-2 rounded-full font-semibold",style:{backgroundColor:"rgba(0, 0, 0, 0.55)",color:"#ffffff",fontFamily:G,fontSize:"".concat(_,"px")},children:e})})},"".concat(e,"-").concat(t))}):null,eU.length>0?eU.map((e,t)=>(0,a.jsx)(M.gd,{from:e.start,durationInFrames:e.durationInFrames,children:(0,a.jsx)(z.fP,{src:e.src})},"".concat(e.src,"-").concat(t))):null]})},O="remotion-works",B="assets",q=()=>new Promise((e,t)=>{if("undefined"==typeof indexedDB){t(Error("IndexedDB 不可用"));return}let r=indexedDB.open("remotion-media",1);r.onupgradeneeded=()=>{let e=r.result;e.objectStoreNames.contains(B)||e.createObjectStore(B)},r.onsuccess=()=>e(r.result),r.onerror=()=>{var e;return t(null!==(e=r.error)&&void 0!==e?e:Error("打开存储失败"))}}),V=async e=>{let t=await q(),r=await new Promise((r,a)=>{let o=t.transaction(B,"readonly").objectStore(B).get(e);o.onsuccess=()=>r(o.result),o.onerror=()=>{var e;return a(null!==(e=o.error)&&void 0!==e?e:Error("读取素材失败"))}});return t.close(),r},T=()=>{var e,t,r,n,c,m,f,p,g,h,x,v,b,j,y,I,N;let F=(0,i.useSearchParams)(),[w,S]=(0,l.useState)(null!==(e=d.Np.title)&&void 0!==e?e:""),[M,z]=(0,l.useState)(null!==(t=d.Np.subtitle)&&void 0!==t?t:""),[R,L]=(0,l.useState)(d.Np.coverImageDataUrl),[C,D]=(0,l.useState)(d.Np.coverVideoDataUrl),[E,B]=(0,l.useState)(void 0),[q,T]=(0,l.useState)(void 0),[W,_]=(0,l.useState)(""),[G,H]=(0,l.useState)(""),[A,Z]=(0,l.useState)(d.Np.backgroundColor),[Y,J]=(0,l.useState)(null!==(r=d.Np.badgeText)&&void 0!==r?r:""),[Q,$]=(0,l.useState)(d.Np.logoImageDataUrl),[K,X]=(0,l.useState)(void 0),[ee,et]=(0,l.useState)(""),[er,ea]=(0,l.useState)(d.Np.audioDataUrl),[eo,el]=(0,l.useState)(void 0),[en,es]=(0,l.useState)(null!==(n=d.Np.audioDataUrl)&&void 0!==n?n:""),[ei,ed]=(0,l.useState)([]),[ec,eu]=(0,l.useState)([]),[em,ef]=(0,l.useState)([]),[ep,eg]=(0,l.useState)([]),[eh,ex]=(0,l.useState)(void 0),[ev,eb]=(0,l.useState)(void 0),[ej,ey]=(0,l.useState)(void 0),[eI,eN]=(0,l.useState)(void 0),[eF,ew]=(0,l.useState)([]),[ek,eS]=(0,l.useState)([]),[eU,eM]=(0,l.useState)([]),[ez,eR]=(0,l.useState)([]),[eL,eC]=(0,l.useState)(d.Np.textColor),[eD,eE]=(0,l.useState)(d.Np.accentColor),[eP,eO]=(0,l.useState)(null!==(c=d.Np.titleFontSize)&&void 0!==c?c:70),[eB,eq]=(0,l.useState)(null!==(m=d.Np.subtitleFontSize)&&void 0!==m?m:24),[eV,eT]=(0,l.useState)(null!==(f=d.Np.titleDisplayFrames)&&void 0!==f?f:90),[eW,e_]=(0,l.useState)(null!==(p=d.Np.captionsFontSize)&&void 0!==p?p:28),[eG,eH]=(0,l.useState)(null!==(g=d.Np.captionsFontFamily)&&void 0!==g?g:"inter"),[eA,eZ]=(0,l.useState)(null!==(h=d.Np.durationInFrames)&&void 0!==h?h:d.SU),[eY,eJ]=(0,l.useState)(null!==(x=d.Np.coverMediaType)&&void 0!==x?x:"image"),[eQ,e$]=(0,l.useState)(null!==(v=d.Np.mediaFit)&&void 0!==v?v:"cover"),[eK,eX]=(0,l.useState)(null!==(b=d.Np.mediaPosition)&&void 0!==b?b:"center"),[e0,e1]=(0,l.useState)(null!==(j=d.Np.layout)&&void 0!==j?j:"center"),[e2,e5]=(0,l.useState)(null===(y=d.Np.showRings)||void 0===y||y),[e4,e6]=(0,l.useState)([]),[e3,e8]=(0,l.useState)(null!==(I=d.Np.imageEffect)&&void 0!==I?I:"none"),[e9,e7]=(0,l.useState)(null!==(N=d.Np.transitionEffect)&&void 0!==N?N:"fade"),[te,tt]=(0,l.useState)([]),[tr,ta]=(0,l.useState)("builtin"),to=(0,l.useMemo)(()=>ei.filter(e=>"upload"===e.type&&e.mediaId).map(e=>e.mediaId),[ei]),tl=(0,l.useMemo)(()=>ec.filter(e=>"upload"===e.type&&e.mediaId).map(e=>e.mediaId),[ec]),tn=(0,l.useMemo)(()=>em.filter(e=>"upload"===e.type&&e.mediaId).map(e=>e.mediaId),[em]),ts=(0,l.useMemo)(()=>ep.filter(e=>"upload"===e.type&&e.mediaId).map(e=>e.mediaId),[ep]);(0,l.useEffect)(()=>{let e=window.localStorage.getItem(O);if(e)try{let t=JSON.parse(e);Array.isArray(t)&&tt(t)}catch(e){tt([])}},[]),(0,l.useEffect)(()=>{if(!("serviceWorker"in navigator))return;let e=()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})};return window.addEventListener("load",e,{once:!0}),()=>{window.removeEventListener("load",e)}},[]);let ti=e=>{tt(e);try{window.localStorage.setItem(O,JSON.stringify(e))}catch(e){return}},td=(0,l.useMemo)(()=>te.filter(e=>e.addToRenderPage),[te]);(0,l.useEffect)(()=>{let e=F.get("workId");e&&td.some(t=>t.id===e)&&ta(e)},[td,F]),(0,l.useEffect)(()=>{var e,t,r,a,o,l,n,s,i,c,u,m,f,p,g,h,x,v,b,j,y,I,N,F,w,k,U,M,R,C,E,P,O,q,V,W,G,A,Y,Q,K,ee,er,eo,en,ei,ec,em;if("builtin"===tr){S(null!==(e=d.Np.title)&&void 0!==e?e:""),z(null!==(t=d.Np.subtitle)&&void 0!==t?t:""),J(null!==(r=d.Np.badgeText)&&void 0!==r?r:""),L(d.Np.coverImageDataUrl),D(d.Np.coverVideoDataUrl),$(d.Np.logoImageDataUrl),B(void 0),T(void 0),X(void 0),el(void 0),_(""),H(""),et(""),ea(d.Np.audioDataUrl),es(null!==(a=d.Np.audioDataUrl)&&void 0!==a?a:""),ed((null!==(o=d.Np.imageArray)&&void 0!==o?o:[]).map(e=>({type:"url",url:e}))),eu([]),ef([]),eg([]),ex(void 0),eb(void 0),ey(void 0),eN(void 0),ew([]),eS([]),eM([]),eR([]),Z(d.Np.backgroundColor),eC(d.Np.textColor),eE(d.Np.accentColor),eO(null!==(l=d.Np.titleFontSize)&&void 0!==l?l:70),eq(null!==(n=d.Np.subtitleFontSize)&&void 0!==n?n:24),eT(null!==(s=d.Np.titleDisplayFrames)&&void 0!==s?s:90),e_(null!==(i=d.Np.captionsFontSize)&&void 0!==i?i:28),eH(null!==(c=d.Np.captionsFontFamily)&&void 0!==c?c:"inter"),eZ(null!==(u=d.Np.durationInFrames)&&void 0!==u?u:d.SU),eJ(null!==(m=d.Np.coverMediaType)&&void 0!==m?m:"image"),e$(null!==(f=d.Np.mediaFit)&&void 0!==f?f:"cover"),eX(null!==(p=d.Np.mediaPosition)&&void 0!==p?p:"center"),e1(null!==(g=d.Np.layout)&&void 0!==g?g:"center"),e5(null===(h=d.Np.showRings)||void 0===h||h),e6(null!==(x=d.Np.subtitles)&&void 0!==x?x:[]),e8(null!==(v=d.Np.imageEffect)&&void 0!==v?v:"none"),e7(null!==(b=d.Np.transitionEffect)&&void 0!==b?b:"fade");return}let ep=td.find(e=>e.id===tr);if(ep){let e=[...(null!==(N=ep.imageMediaIds)&&void 0!==N?N:[]).map(e=>({type:"upload",mediaId:e})),...(null!==(F=ep.imageUrls)&&void 0!==F?F:[]).map(e=>({type:"url",url:e}))],t=[...ep.coverImageMediaId?[{type:"upload",mediaId:ep.coverImageMediaId}]:[],...ep.coverImageUrl?[{type:"url",url:ep.coverImageUrl}]:[],...ep.coverImageDataUrl?[{type:"url",url:ep.coverImageDataUrl}]:[]],r=[...ep.coverVideoMediaId?[{type:"upload",mediaId:ep.coverVideoMediaId}]:[],...ep.coverVideoUrl?[{type:"url",url:ep.coverVideoUrl}]:[],...ep.coverVideoDataUrl?[{type:"url",url:ep.coverVideoDataUrl}]:[]],a=[...ep.audioMediaId?[{type:"upload",mediaId:ep.audioMediaId}]:[],...ep.audioUrl?[{type:"url",url:ep.audioUrl}]:[],...ep.audioDataUrl?[{type:"url",url:ep.audioDataUrl}]:[]],o=ep.imageSequenceItems&&ep.imageSequenceItems.length>0?ep.imageSequenceItems:e,l=ep.coverImageSequenceItems&&ep.coverImageSequenceItems.length>0?ep.coverImageSequenceItems:t,n=ep.coverVideoSequenceItems&&ep.coverVideoSequenceItems.length>0?ep.coverVideoSequenceItems:r,s=ep.audioSequenceItems&&ep.audioSequenceItems.length>0?ep.audioSequenceItems:a;S(null!==(w=ep.title)&&void 0!==w?w:""),z(null!==(k=ep.subtitle)&&void 0!==k?k:""),J(null!==(U=ep.badgeText)&&void 0!==U?U:""),L(ep.coverImageDataUrl),D(ep.coverVideoDataUrl),$(ep.logoImageDataUrl),B(ep.coverImageMediaId),T(ep.coverVideoMediaId),X(ep.logoImageMediaId),el(ep.audioMediaId),ed(o),eu(l),ef(n),eg(s),_(null!==(R=null!==(M=null===(j=l.find(e=>"url"===e.type))||void 0===j?void 0:j.url)&&void 0!==M?M:ep.coverImageUrl)&&void 0!==R?R:""),H(null!==(E=null!==(C=null===(y=n.find(e=>"url"===e.type))||void 0===y?void 0:y.url)&&void 0!==C?C:ep.coverVideoUrl)&&void 0!==E?E:""),et(null!==(P=ep.logoImageUrl)&&void 0!==P?P:""),ea(ep.audioDataUrl),es(null!==(q=null!==(O=null===(I=s.find(e=>"url"===e.type))||void 0===I?void 0:I.url)&&void 0!==O?O:ep.audioUrl)&&void 0!==q?q:""),Z(ep.backgroundColor),eC(ep.textColor),eE(ep.accentColor),eO(null!==(V=ep.titleFontSize)&&void 0!==V?V:70),eq(null!==(W=ep.subtitleFontSize)&&void 0!==W?W:24),eT(null!==(G=ep.titleDisplayFrames)&&void 0!==G?G:90),e_(null!==(A=ep.captionsFontSize)&&void 0!==A?A:28),eH(null!==(Y=ep.captionsFontFamily)&&void 0!==Y?Y:"inter"),eZ(null!==(Q=ep.durationInFrames)&&void 0!==Q?Q:d.SU),eJ(null!==(K=ep.coverMediaType)&&void 0!==K?K:ep.coverVideoDataUrl||ep.coverVideoUrl?"video":"image"),e$(null!==(ee=ep.mediaFit)&&void 0!==ee?ee:"cover"),eX(null!==(er=ep.mediaPosition)&&void 0!==er?er:"center"),e1(null!==(eo=ep.layout)&&void 0!==eo?eo:"center"),e5(null===(en=ep.showRings)||void 0===en||en),e6(null!==(ei=ep.subtitles)&&void 0!==ei?ei:[]),e8(null!==(ec=ep.imageEffect)&&void 0!==ec?ec:"none"),e7(null!==(em=ep.transitionEffect)&&void 0!==em?em:"fade")}},[td,tr]),(0,l.useEffect)(()=>{let e,t=!0;return(async()=>{if(!E){ex(void 0);return}try{let r=await V(E);if(!t)return;if(!r){ex(void 0);return}e=URL.createObjectURL(r),ex(t=>(t&&URL.revokeObjectURL(t),e))}catch(e){t&&ex(void 0)}})(),()=>{t=!1,e&&URL.revokeObjectURL(e)}},[E]),(0,l.useEffect)(()=>{let e,t=!0;return(async()=>{if(!q){eb(void 0);return}try{let r=await V(q);if(!t)return;if(!r){eb(void 0);return}e=URL.createObjectURL(r),eb(t=>(t&&URL.revokeObjectURL(t),e))}catch(e){t&&eb(void 0)}})(),()=>{t=!1,e&&URL.revokeObjectURL(e)}},[q]),(0,l.useEffect)(()=>{let e,t=!0;return(async()=>{if(!K){ey(void 0);return}try{let r=await V(K);if(!t)return;if(!r){ey(void 0);return}e=URL.createObjectURL(r),ey(t=>(t&&URL.revokeObjectURL(t),e))}catch(e){t&&ey(void 0)}})(),()=>{t=!1,e&&URL.revokeObjectURL(e)}},[K]),(0,l.useEffect)(()=>{let e,t=!0;return(async()=>{if(!eo){eN(void 0);return}try{let r=await V(eo);if(!t)return;if(!r){eN(void 0);return}e=URL.createObjectURL(r),eN(t=>(t&&URL.revokeObjectURL(t),e))}catch(e){t&&eN(void 0)}})(),()=>{t=!1,e&&URL.revokeObjectURL(e)}},[eo]),(0,l.useEffect)(()=>{let e=!0,t=[];return(async()=>{if(0===tl.length){ew([]);return}try{let r=[];for(let a of tl){let o=await V(a);if(!e)return;if(!o)continue;let l=URL.createObjectURL(o);t.push(l),r.push(l)}e&&ew(r)}catch(t){e&&ew([])}})(),()=>{e=!1,t.forEach(e=>URL.revokeObjectURL(e))}},[tl]),(0,l.useEffect)(()=>{let e=!0,t=[];return(async()=>{if(0===tn.length){eS([]);return}try{let r=[];for(let a of tn){let o=await V(a);if(!e)return;if(!o)continue;let l=URL.createObjectURL(o);t.push(l),r.push(l)}e&&eS(r)}catch(t){e&&eS([])}})(),()=>{e=!1,t.forEach(e=>URL.revokeObjectURL(e))}},[tn]),(0,l.useEffect)(()=>{let e=!0,t=[];return(async()=>{if(0===ts.length){eM([]);return}try{let r=[];for(let a of ts){let o=await V(a);if(!e)return;if(!o)continue;let l=URL.createObjectURL(o);t.push(l),r.push(l)}e&&eM(r)}catch(t){e&&eM([])}})(),()=>{e=!1,t.forEach(e=>URL.revokeObjectURL(e))}},[ts]),(0,l.useEffect)(()=>{let e=!0,t=[];return(async()=>{if(0===to.length){eR([]);return}try{let r=[];for(let a of to){let o=await V(a);if(!e)return;if(!o)continue;let l=URL.createObjectURL(o);t.push(l),r.push(l)}e&&eR(r)}catch(t){e&&eR([])}})(),()=>{e=!1,t.forEach(e=>URL.revokeObjectURL(e))}},[to]);let tc=(0,l.useMemo)(()=>{let e=new Map;return to.forEach((t,r)=>{let a=ez[r];a&&e.set(t,a)}),e},[to,ez]),tu=(0,l.useMemo)(()=>{let e=new Map;return tl.forEach((t,r)=>{let a=eF[r];a&&e.set(t,a)}),e},[tl,eF]),tm=(0,l.useMemo)(()=>{let e=new Map;return tn.forEach((t,r)=>{let a=ek[r];a&&e.set(t,a)}),e},[tn,ek]),tf=(0,l.useMemo)(()=>{let e=new Map;return ts.forEach((t,r)=>{let a=eU[r];a&&e.set(t,a)}),e},[ts,eU]),tp=(0,l.useMemo)(()=>{let e=W.trim().length>0?W.trim():null!=eh?eh:R,t=G.trim().length>0?G.trim():null!=ev?ev:C,r=ee.trim().length>0?ee.trim():null!=ej?ej:Q,a=en.trim().length>0?en.trim():null!=eI?eI:er,o=ec.map(e=>{let t="upload"===e.type?e.mediaId?tu.get(e.mediaId):void 0:e.url;return t?{src:t,durationInFrames:e.durationInFrames}:null}).filter(Boolean),l=em.map(e=>{let t="upload"===e.type?e.mediaId?tm.get(e.mediaId):void 0:e.url;return t?{src:t,durationInFrames:e.durationInFrames}:null}).filter(Boolean),n=ep.map(e=>{let t="upload"===e.type?e.mediaId?tf.get(e.mediaId):void 0:e.url;return t?{src:t,durationInFrames:e.durationInFrames}:null}).filter(Boolean),s=ei.map(e=>{let t="upload"===e.type?e.mediaId?tc.get(e.mediaId):void 0:e.url;return t?{src:t,durationInFrames:e.durationInFrames}:null}).filter(Boolean),i=s.map(e=>e.src);return{title:w,subtitle:M||void 0,badgeText:Y||void 0,coverImageDataUrl:e,coverVideoDataUrl:t,logoImageDataUrl:r,coverImageSequence:o.length>0?o:void 0,coverVideoSequence:l.length>0?l:void 0,audioSequence:n.length>0?n:void 0,imageArray:0===s.length&&i.length>0?i:void 0,imageSequence:s.length>0?s:void 0,imageEffect:e3,transitionEffect:e9,subtitles:e4.length>0?e4:void 0,audioDataUrl:a,backgroundColor:A,textColor:eL,accentColor:eD,titleFontSize:eP,subtitleFontSize:eB,titleDisplayFrames:eV,captionsFontSize:eW,captionsFontFamily:eG,durationInFrames:eA,coverMediaType:eY,mediaFit:eQ,mediaPosition:eK,layout:e0,showRings:e2}},[eD,er,eI,tf,ep,en,A,Y,R,eh,tu,ec,W,C,ev,tm,em,G,eY,e3,tc,ei,e0,Q,ej,ee,eQ,eK,e2,M,eB,e4,w,eL,eP,eV,eW,eG,e9,eA]),tg=e=>{ti(te.filter(t=>t.id!==e)),tr===e&&ta("builtin")},th=e=>{ti(te.map(t=>t.id===e?{...t,addToRenderPage:!t.addToRenderPage}:t))};return(0,a.jsx)("div",{className:"min-h-screen supports-[height:100dvh]:min-h-[100dvh] bg-background text-foreground",children:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-screen-xl px-4 py-6 sm:px-6 sm:py-10 lg:px-8 supports-[padding:env(safe-area-inset-top)]:pt-[calc(env(safe-area-inset-top)+1.5rem)] supports-[padding:env(safe-area-inset-bottom)]:pb-[calc(env(safe-area-inset-bottom)+1.5rem)]",children:[(0,a.jsxs)("div",{className:"grid gap-6 lg:gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)("div",{className:"overflow-hidden rounded-geist shadow-[0_0_200px_rgba(0,0,0,0.15)] bg-background",children:(0,a.jsx)("div",{className:"w-full aspect-video",children:(0,a.jsx)(o.ai,{component:P,inputProps:tp,durationInFrames:eA,fps:d.cB,compositionHeight:d.cS,compositionWidth:d.BL,style:{width:"100%",height:"100%"},controls:!0,autoPlay:!0,loop:!0})})}),(0,a.jsxs)("div",{className:"border border-unfocused-border-color p-geist rounded-geist bg-background font-geist",children:[(0,a.jsx)("h3",{className:"text-foreground font-bold text-base mb-3",children:"使用帮助"}),(0,a.jsxs)("ol",{className:"text-sm leading-6 text-subtitle list-decimal pl-5 space-y-2",children:[(0,a.jsx)("li",{children:"在输入框中填写你的视频标题。"}),(0,a.jsx)("li",{children:"按需调整素材与样式设置。"}),(0,a.jsx)("li",{children:"点击“开始渲染”，等待进度完成。"}),(0,a.jsx)("li",{children:"渲染完成后点击“下载视频”保存到本地。"}),(0,a.jsx)("li",{children:"需要重新生成时，点击“重新开始”。"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 lg:sticky lg:top-8 self-start",children:[(0,a.jsxs)("div",{className:"border border-unfocused-border-color p-geist rounded-geist bg-background font-geist flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-foreground font-medium",children:"选择作品"}),(0,a.jsxs)("select",{className:"leading-[1.7] block w-full rounded-geist bg-background p-geist-half text-foreground text-sm border border-unfocused-border-color transition-colors duration-150 ease-in-out focus:border-focused-border-color outline-none",value:tr,onChange:e=>ta(e.currentTarget.value),children:[(0,a.jsx)("option",{value:"builtin",children:"内置示例作品"}),td.map(e=>{var t;return(0,a.jsx)("option",{value:e.id,children:null!==(t=e.title)&&void 0!==t?t:"未命名作品"},e.id)})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)(s(),{href:"/works/new/template-selection",className:"border-foreground border rounded-geist bg-foreground text-background px-geist-half font-geist h-10 font-medium transition-all duration-150 ease-in-out inline-flex items-center text-sm hover:bg-background hover:text-foreground hover:border-focused-border-color",children:"新增作品"}),(0,a.jsx)("div",{className:"text-xs text-subtitle flex items-center",children:"新增作品后可在此处选择并渲染"})]}),te.length>0?(0,a.jsxs)("div",{className:"border-t border-unfocused-border-color pt-4 flex flex-col gap-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-foreground",children:"作品管理"}),te.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-foreground font-medium",children:null!==(t=e.title)&&void 0!==t?t:"未命名作品"}),(0,a.jsx)("div",{className:"text-xs text-subtitle",children:e.addToRenderPage?"已加入渲染页":"未加入渲染页"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(s(),{href:"/works/new?workId=".concat(e.id),className:"text-xs text-foreground border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color",children:"编辑"}),(0,a.jsx)("button",{className:"text-xs text-foreground border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color",onClick:()=>th(e.id),children:e.addToRenderPage?"从渲染页移除":"加入渲染页"}),(0,a.jsx)("button",{className:"text-xs text-foreground border border-unfocused-border-color rounded-geist px-2 py-1 hover:border-focused-border-color",onClick:()=>tg(e.id),children:"删除"})]})]},e.id)})]}):null]}),(0,a.jsx)(k,{text:w,setText:S,inputProps:tp,composition:{component:P,id:d.Yd,width:d.BL,height:d.cS,fps:d.cB,durationInFrames:eA,defaultProps:d.Np}},"render-".concat(tr))]})]}),(0,a.jsx)(u,{}),(0,a.jsx)(u,{}),(0,a.jsx)(U,{})]})})},W=()=>(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{className:"max-w-screen-xl mx-auto mb-16 mt-10 font-geist px-4 text-sm text-subtitle",children:"页面加载中..."}),children:(0,a.jsx)(T,{})})}},e=>{var t=t=>e(e.s=t);e.O(0,[589,244,594,706,441,684,358],()=>t(1841)),_N_E=e.O()}]);